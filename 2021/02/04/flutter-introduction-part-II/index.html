<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>flutter introduction part II：使用Provider 的深浅色模式和多语言切换 | Laohoo</title><meta name="author" content="laohoodman"><meta name="copyright" content="laohoodman"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="上一节创建了项目，并通过 Intl 实现在项目的多语言国际化支持。但是还没有在项目提供多语言的切换功能。 这一节除了实现多语言的选择切换功能，还同时实现项目的深色、浅色主题切换，需要用过以下两个包：  Provider: Provider是 Google I&#x2F;O 2019官方推荐的状态管理方式，是一套实现跨组件状态共享的解决方案。  shared_preferences : shared_pref">
<meta property="og:type" content="article">
<meta property="og:title" content="flutter introduction part II：使用Provider 的深浅色模式和多语言切换">
<meta property="og:url" content="https://hujiyi.github.io/2021/02/04/flutter-introduction-part-II/index.html">
<meta property="og:site_name" content="Laohoo">
<meta property="og:description" content="上一节创建了项目，并通过 Intl 实现在项目的多语言国际化支持。但是还没有在项目提供多语言的切换功能。 这一节除了实现多语言的选择切换功能，还同时实现项目的深色、浅色主题切换，需要用过以下两个包：  Provider: Provider是 Google I&#x2F;O 2019官方推荐的状态管理方式，是一套实现跨组件状态共享的解决方案。  shared_preferences : shared_pref">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hujiyi.github.io/2021/02/02/flutter-introduction-part-I/flutter_eman_blog.png">
<meta property="article:published_time" content="2021-02-04T02:50:29.000Z">
<meta property="article:modified_time" content="2022-10-11T01:40:13.254Z">
<meta property="article:author" content="laohoodman">
<meta property="article:tag" content="flutter">
<meta property="article:tag" content="provider">
<meta property="article:tag" content="shared_preferences">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hujiyi.github.io/2021/02/02/flutter-introduction-part-I/flutter_eman_blog.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://hujiyi.github.io/2021/02/04/flutter-introduction-part-II/index.html"><link rel="preconnect"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: '/pluginsSrc/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'flutter introduction part II：使用Provider 的深浅色模式和多语言切换',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://hujiyi.github.io/2020/02/29/use-hexo-tag-cloud/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">62</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">56</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://hujiyi.github.io/2021/02/02/flutter-introduction-part-I/flutter_eman_blog.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Laohoo</span></a><a class="nav-page-title" href="/"><span class="site-name">flutter introduction part II：使用Provider 的深浅色模式和多语言切换</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">flutter introduction part II：使用Provider 的深浅色模式和多语言切换</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-02-04T02:50:29.000Z" title="发表于 2021-02-04 10:50:29">2021-02-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-11T01:40:13.254Z" title="更新于 2022-10-11 09:40:13">2022-10-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/flutter/">flutter</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">2.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>13分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p>上一节创建了项目，并通过 <code>Intl</code> 实现在项目的多语言国际化支持。但是还没有在项目提供多语言的切换功能。</p>
<p>这一节除了实现多语言的选择切换功能，还同时实现项目的深色、浅色主题切换，需要用过以下两个包：</p>
<ol>
<li><p><code>Provider</code>: <code>Provider</code>是 <code>Google I/O 2019</code>官方推荐的状态管理方式，是一套实现跨组件状态共享的解决方案。</p>
</li>
<li><p><code>shared_preferences</code> : <code>shared_preferences</code> 是一个轻量级存储类，以键值对的形式保存设置，属性和数据。</p>
</li>
</ol>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>在项目的 <code>pubspec.yaml</code> 文件中增加以下包依赖：</p>
<p><code>Provider</code>的最新版本查询：<a target="_blank" rel="noopener" href="https://pub.dev/packages/provider">https://pub.dev/packages/provider</a><br><code>shared_preferences</code>的最新版本查询：<a target="_blank" rel="noopener" href="https://pub.dev/packages/shared_preferences">https://pub.dev/packages/shared_preferences</a></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">flutter:</span></span><br><span class="line">    <span class="attr">sdk:</span> <span class="string">flutter</span></span><br><span class="line">  <span class="comment"># 国际化</span></span><br><span class="line">  <span class="attr">flutter_localizations:</span></span><br><span class="line">    <span class="attr">sdk:</span> <span class="string">flutter</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">cupertino_icons:</span> <span class="string">^1.0.0</span></span><br><span class="line">  <span class="attr">intl:</span> <span class="string">^0.16.1</span></span><br><span class="line">  <span class="attr">intl_translation:</span> <span class="string">^0.17.10+1</span></span><br><span class="line">  <span class="attr">provider:</span> <span class="string">^4.3.3</span>                 <span class="comment"># 增加这一行</span></span><br><span class="line">  <span class="attr">shared_preferences:</span> <span class="string">^0.5.12+4</span>    <span class="comment"># 增加这一行</span></span><br></pre></td></tr></table></figure>

<p>保存 <code>pubspec.yaml</code> 文件以获取包文件</p>
<p>打开语言文件 <code>lib\l10n\intl_en.arb</code>，编辑其内容如以下代码：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;appName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Deep Sky&quot;</span><span class="punctuation">,</span>   </span><br><span class="line">    <span class="attr">&quot;login&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Login&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tabHome&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Home&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tabProject&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Project&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Settings&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;settingLanguage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Language&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;autoBySystem&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Auto&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;themeMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Theme Mode&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;darkMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Dark Mode&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lightMode&quot;</span><span class="punctuation">:</span><span class="string">&quot;Light Mode&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>


<p>打开语言文件 <code>lib\l10n\intl_zh.arb</code>，编辑其内容如以下代码：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;appName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;深处天空&quot;</span><span class="punctuation">,</span>    </span><br><span class="line">    <span class="attr">&quot;login&quot;</span><span class="punctuation">:</span> <span class="string">&quot;登录&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tabHome&quot;</span><span class="punctuation">:</span> <span class="string">&quot;首页&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tabProject&quot;</span><span class="punctuation">:</span> <span class="string">&quot;项目&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="string">&quot;设置&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;settingLanguage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;语言设置&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;autoBySystem&quot;</span><span class="punctuation">:</span> <span class="string">&quot;跟随系统&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;themeMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;主题模式&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;darkMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;深色模式&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lightMode&quot;</span><span class="punctuation">:</span><span class="string">&quot;浅色模式&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="主导航页"><a href="#主导航页" class="headerlink" title="主导航页"></a>主导航页</h2><p>在项目中新建文件夹: <code>lib\views</code> </p>
<p>在项目中新建文件: <code>lib\views\home_page.dart</code> </p>
<p>在项目中新建文件夹: <code>lib\views\settings</code> </p>
<p>在项目中新建文件：<code>lib\views\settings\settings_page.dart</code></p>
<p>打开文件 <code>lib\views\home_page.dart</code> ， 编辑其内容如以下代码：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomePage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      child: Text(<span class="string">&#x27;Home&#x27;</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>打开文件 <code>lib\views\settings\settings_page.dart</code>， 编辑其内容如以下代码：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SettingsPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      child: Text(<span class="string">&#x27;Settings&#x27;</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>打开文件 <code>lib\views\tab_navigator_page.dart</code>， 编辑其内容如以下代码：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:deep_sky_app/generated/l10n.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:deep_sky_app/views/home_page.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:deep_sky_app/views/settings/settings_page.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TabNavigatorPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _TabNavigatorPageState createState() =&gt; _TabNavigatorPageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_TabNavigatorPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">TabNavigatorPage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> _selectedIndex = <span class="number">0</span>;</span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; widgets = [HomePage(), HomePage(), SettingsPage()];</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      child: Scaffold(</span><br><span class="line">        body: widgets[_selectedIndex],</span><br><span class="line">        bottomNavigationBar: BottomNavigationBar(</span><br><span class="line">          onTap: (index) &#123;</span><br><span class="line">            setState(() &#123;</span><br><span class="line">              _selectedIndex = index;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;,</span><br><span class="line">          currentIndex: _selectedIndex,</span><br><span class="line">          type: BottomNavigationBarType.fixed,</span><br><span class="line">          items: [</span><br><span class="line">            BottomNavigationBarItem(</span><br><span class="line">              icon: Icon(Icons.home_outlined),</span><br><span class="line">              activeIcon: Icon(Icons.home),</span><br><span class="line">              label: S.of(context).tabHome,</span><br><span class="line">            ),</span><br><span class="line">            BottomNavigationBarItem(</span><br><span class="line">              icon: Icon(Icons.adb_outlined),</span><br><span class="line">              label: S.of(context).tabProject,</span><br><span class="line">            ),</span><br><span class="line">            BottomNavigationBarItem(</span><br><span class="line">              icon: Icon(Icons.account_circle_outlined),</span><br><span class="line">              activeIcon: Icon(Icons.account_circle),</span><br><span class="line">              label: S.of(context).settings,</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>项目运行</p>
<img src="/2021/02/04/flutter-introduction-part-II/01home_run.png" class="" title="homerun">

<h2 id="添加-Provider-状态管理类"><a href="#添加-Provider-状态管理类" class="headerlink" title="添加 Provider 状态管理类"></a>添加 <code>Provider</code> 状态管理类</h2><p>新建文件夹：<code>lib\provider</code>, 然后新建两个状态管理文件：<code>lib\provider\locale_provider.dart</code> 和 <code>lib\provider\theme_provider.dart</code></p>
<h3 id="主题模式状态管理"><a href="#主题模式状态管理" class="headerlink" title="主题模式状态管理"></a>主题模式状态管理</h3><p>打开文件 <code>lib\provider\theme_provider.dart</code>, 编辑其内容如以下代码：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:shared_preferences/shared_preferences.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:deep_sky_app/generated/l10n.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参考资料：https://omadijaya.id/flutter-dynamic-dark-mode-with-provider-and-shared-preferences/</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThemeProvider</span> <span class="keyword">extends</span> <span class="title">ChangeNotifier</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> key = <span class="string">&#x27;theme&#x27;</span>; <span class="comment">// 用于保存当前主题状态的键名</span></span><br><span class="line">  <span class="comment">// 定义用于三种主题模式的字典</span></span><br><span class="line">  <span class="built_in">Map</span> themeModeList = &lt;<span class="built_in">String</span>, ThemeMode&gt;&#123;</span><br><span class="line">    <span class="string">&#x27;dark&#x27;</span>: ThemeMode.dark, <span class="comment">// 深色模式</span></span><br><span class="line">    <span class="string">&#x27;light&#x27;</span>: ThemeMode.light, <span class="comment">// 浅色模式</span></span><br><span class="line">    <span class="string">&#x27;system&#x27;</span>: ThemeMode.system <span class="comment">// 跟随系统</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  SharedPreferences _preferences;</span><br><span class="line">  <span class="built_in">String</span> _themeMode;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 返回当前的主题模式</span></span><br><span class="line">  <span class="built_in">String</span> <span class="keyword">get</span> themeMode =&gt; _themeMode;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 构造方法</span></span><br><span class="line">  ThemeProvider() &#123;</span><br><span class="line">    _themeMode = <span class="string">&#x27;system&#x27;</span>; <span class="comment">// 默认为跟随系统</span></span><br><span class="line">    _loadFromPreferences(); <span class="comment">// 读取已有模式设置</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 返回用于显示在界面上的主题选项名称</span></span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">String</span> getThemeModeName(<span class="built_in">String</span> mode, context) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (mode) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;dark&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> S.of(context).darkMode;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;light&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> S.of(context).lightMode;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> S.of(context).autoBySystem;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 返回当前的主题模式</span></span><br><span class="line">  ThemeMode getThemeMode(<span class="built_in">String</span> mode) &#123;</span><br><span class="line">    <span class="keyword">return</span> themeModeList[mode];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 深色、浅色模式设置</span></span><br><span class="line">  ThemeData getThemeData(&#123;<span class="built_in">bool</span> isDark = <span class="keyword">false</span>&#125;) &#123;</span><br><span class="line">    <span class="keyword">return</span> ThemeData(brightness: isDark ? Brightness.dark : Brightness.light);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 初始化 SharedPreferences</span></span><br><span class="line">  _initialPreferences() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (_preferences == <span class="keyword">null</span>)</span><br><span class="line">      _preferences = <span class="keyword">await</span> SharedPreferences.getInstance();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//  保存状态</span></span><br><span class="line">  _savePreferences() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> _initialPreferences();</span><br><span class="line">    _preferences.setString(key, _themeMode);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 读取状态</span></span><br><span class="line">  _loadFromPreferences() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> _initialPreferences();</span><br><span class="line">    _themeMode = _preferences.getString(key) ?? <span class="string">&#x27;system&#x27;</span>;</span><br><span class="line">    notifyListeners();  <span class="comment">// 变更通知，在数据处理完成后执行</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 深浅色切换状态</span></span><br><span class="line">  toggleChangeTheme(val) &#123;</span><br><span class="line">    _themeMode = val;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;current theme mode: <span class="subst">$_themeMode</span>&#x27;</span>);</span><br><span class="line">    _savePreferences();</span><br><span class="line">    notifyListeners();  <span class="comment">// 变更通知，在数据处理完成后执行</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="多语言状态管理"><a href="#多语言状态管理" class="headerlink" title="多语言状态管理"></a>多语言状态管理</h3><p>打开文件 <code>lib\provider\locale_provider.dart</code>， 编辑其内容如以下代码：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:shared_preferences/shared_preferences.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:deep_sky_app/generated/l10n.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LocaleProvider</span> <span class="keyword">extends</span> <span class="title">ChangeNotifier</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> key = <span class="string">&#x27;locale&#x27;</span>; <span class="comment">// 用于保存当前语言的键名</span></span><br><span class="line"></span><br><span class="line">  SharedPreferences _preferences;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> _language; <span class="comment">// 当前的语言名称，例如：&#x27;zh&#x27;，&#x27;en&#x27;等</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> <span class="keyword">get</span> language =&gt; _language; <span class="comment">// 返回当前语言名称</span></span><br><span class="line"></span><br><span class="line">  Locale <span class="keyword">get</span> locale &#123;</span><br><span class="line">    <span class="keyword">if</span> (_language != <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> Locale(_language);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 返回用于显示在界面中的语言名字</span></span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">String</span> localeName(<span class="built_in">String</span> lang, context) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (lang) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;en&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;English&#x27;</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;zh&#x27;</span>:</span><br><span class="line">        <span class="comment">// case &#x27;zh_CN&#x27;:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;简体中文&#x27;</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> S.of(context).autoBySystem;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 构造方法</span></span><br><span class="line">  LocaleProvider() &#123;</span><br><span class="line">    _language = <span class="string">&#x27;&#x27;</span>; <span class="comment">// 默认语言跟随系统</span></span><br><span class="line">    _loadFromPreferences();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 初始化 SharedPreferences</span></span><br><span class="line">  _initialPreferences() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (_preferences == <span class="keyword">null</span>)</span><br><span class="line">      _preferences = <span class="keyword">await</span> SharedPreferences.getInstance();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 保存当前的语言名称</span></span><br><span class="line">  _savePreferences() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> _initialPreferences();</span><br><span class="line">    _preferences.setString(key, _language);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 读取已保存的语言名称</span></span><br><span class="line">  _loadFromPreferences() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> _initialPreferences();</span><br><span class="line">    _language = _preferences.getString(key) ?? <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    notifyListeners();  <span class="comment">// 变更通知，在数据处理完成后执行</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 切换语言</span></span><br><span class="line">  toggleChangeLocale(<span class="built_in">String</span> language) &#123;</span><br><span class="line">    _language = language;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;current locale: <span class="subst">$language</span>&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    _savePreferences();</span><br><span class="line">    notifyListeners();  <span class="comment">// 变更通知，在数据处理完成后执行</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="修改入口文件-main-dart"><a href="#修改入口文件-main-dart" class="headerlink" title="修改入口文件 main.dart"></a>修改入口文件 <code>main.dart</code></h2><p>打开文件<code>lib\main.dart</code>， 编辑其内容如以下代码：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_localizations/flutter_localizations.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:provider/provider.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:deep_sky_app/generated/l10n.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:deep_sky_app/provider/locale_provider.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:deep_sky_app/provider/theme_provider.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:deep_sky_app/views/tab_navigator_page.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="comment">// This widget is the root of your application.</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// MultiProvider 用于管理多个 Provider</span></span><br><span class="line">    <span class="keyword">return</span> MultiProvider(</span><br><span class="line">      providers: [</span><br><span class="line">        <span class="comment">// ChangeNotifierProvider 用于对 ChangeNotifier 进行监听</span></span><br><span class="line">        ChangeNotifierProvider&lt;ThemeProvider&gt;(</span><br><span class="line">            create: (context) =&gt; ThemeProvider()),</span><br><span class="line">        <span class="comment">// ChangeNotifierProvider 用于对 ChangeNotifier 进行监听</span></span><br><span class="line">        ChangeNotifierProvider&lt;LocaleProvider&gt;(</span><br><span class="line">            create: (context) =&gt; LocaleProvider()),</span><br><span class="line">      ],</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 通过 Consumer2 来组合同时监听两个结果，&lt;&gt;内的对象数量与 Consumer 后面的数字一致</span></span><br><span class="line">      child: Consumer2&lt;ThemeProvider, LocaleProvider&gt;(</span><br><span class="line">        builder: (context, ThemeProvider themeProvider,</span><br><span class="line">            LocaleProvider localeProvider, child) &#123;</span><br><span class="line">          <span class="keyword">return</span> MaterialApp(</span><br><span class="line">            localizationsDelegates: <span class="keyword">const</span> [</span><br><span class="line">              S.delegate,</span><br><span class="line">              GlobalMaterialLocalizations.delegate,</span><br><span class="line">              GlobalCupertinoLocalizations.delegate,</span><br><span class="line">              GlobalWidgetsLocalizations.delegate</span><br><span class="line">            ],</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 语言列表方式一：自动获取所有语言列表</span></span><br><span class="line">            <span class="comment">// supportedLocales: S.delegate.supportedLocales,</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 语言列表方式二：自动获取并设置一个默认语言</span></span><br><span class="line">            supportedLocales: [</span><br><span class="line">              <span class="keyword">const</span> Locale(<span class="string">&#x27;en&#x27;</span>, <span class="string">&#x27;&#x27;</span>),</span><br><span class="line">              ...S.delegate.supportedLocales</span><br><span class="line">            ],</span><br><span class="line">            <span class="comment">// 语言列表方式三：手动添加语言列表</span></span><br><span class="line">            <span class="comment">// supportedLocales: [</span></span><br><span class="line">            <span class="comment">//   const Locale(&#x27;zh&#x27;, &#x27;CN&#x27;),</span></span><br><span class="line">            <span class="comment">//   const Locale(&#x27;en&#x27;, &#x27;US&#x27;),</span></span><br><span class="line">            <span class="comment">// ],</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// localeListResolutionCallback: (locale, supportedLocales) &#123;</span></span><br><span class="line">            <span class="comment">//   print(locale); // 在控制台显示当前语言</span></span><br><span class="line">            <span class="comment">//                return null;</span></span><br><span class="line">            <span class="comment">// &#125;,</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 插件目前不完善手动处理简繁体</span></span><br><span class="line">            <span class="comment">// 也用于处理 zh 和 zh_CN 这样有两个不同名字的语言</span></span><br><span class="line">            localeResolutionCallback: (locale, supportLocales) &#123;</span><br><span class="line">              <span class="comment">// 中文 简繁体处理</span></span><br><span class="line">              <span class="keyword">if</span> (locale?.languageCode == <span class="string">&#x27;zh&#x27;</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (locale?.scriptCode == <span class="string">&#x27;Hant&#x27;</span>) &#123;</span><br><span class="line">                  <span class="keyword">return</span> <span class="keyword">const</span> Locale(<span class="string">&#x27;zh&#x27;</span>, <span class="string">&#x27;HK&#x27;</span>); <span class="comment">//繁体</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  <span class="keyword">return</span> <span class="keyword">const</span> Locale(<span class="string">&#x27;zh&#x27;</span>, <span class="string">&#x27;CN&#x27;</span>); <span class="comment">//简体</span></span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 获取 当前的语言</span></span><br><span class="line">            locale: Provider.of&lt;LocaleProvider&gt;(context, listen: <span class="keyword">false</span>).locale,</span><br><span class="line"></span><br><span class="line">            title: <span class="string">&#x27;Deep Sky&#x27;</span>,</span><br><span class="line">            <span class="comment">// 生成应用标题</span></span><br><span class="line">            onGenerateTitle: (context) &#123;</span><br><span class="line">              <span class="keyword">return</span> S.of(context).appName;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// 深色、浅色主题选择 的第一种方式</span></span><br><span class="line">            <span class="comment">// theme: themeProvider.darkMode ? dark_mode : light_mode,</span></span><br><span class="line"></span><br><span class="line">            theme: ThemeData(</span><br><span class="line">              primarySwatch: Colors.blue,</span><br><span class="line">              visualDensity: VisualDensity.adaptivePlatformDensity,</span><br><span class="line">            ),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 深色、浅色主题选择 的第二种方式的第一个选项</span></span><br><span class="line">            themeMode: themeProvider.getThemeMode(</span><br><span class="line">                Provider.of&lt;ThemeProvider&gt;(context, listen: <span class="keyword">false</span>).themeMode),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 深色、浅色主题选择 的第二种方式的第二个选项, 少了这个上面的第一个选项不起作用</span></span><br><span class="line">            darkTheme: ThemeData(brightness: Brightness.dark),</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 设置文字大小不随系统设置改变</span></span><br><span class="line">            builder: (context, widget) &#123;</span><br><span class="line">              <span class="keyword">return</span> MediaQuery(</span><br><span class="line">                  data: MediaQuery.of(context).copyWith(textScaleFactor: <span class="number">1.0</span>),</span><br><span class="line">                  child: widget);</span><br><span class="line">            &#125;,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 主页</span></span><br><span class="line">            home: TabNavigatorPage(),</span><br><span class="line">          );</span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="设置页"><a href="#设置页" class="headerlink" title="设置页"></a>设置页</h2><p>新建文件夹：<code>lib\views\settings\widgets</code></p>
<p>然后新建文件：<code>lib\views\settings\widgets\account_info.dart</code> 和 <code>lib\views\settings\widgets\common_settings.dart</code></p>
<h3 id="设置页的用户信息部分"><a href="#设置页的用户信息部分" class="headerlink" title="设置页的用户信息部分"></a>设置页的用户信息部分</h3><p>打开文件<code>lib\views\settings\widgets\account_info.dart</code>， 编辑其内容如以下代码：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:deep_sky_app/generated/l10n.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AccountInfo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      width: MediaQuery.of(context).size.width,</span><br><span class="line">      padding: EdgeInsets.only(top: <span class="number">80</span>, bottom: <span class="number">50</span>),</span><br><span class="line">      child: CircleAvatar(</span><br><span class="line">        backgroundColor: Theme.of(context).primaryColor,</span><br><span class="line">        radius: <span class="number">50</span>,</span><br><span class="line">        child: Text(</span><br><span class="line">          S.of(context).login,</span><br><span class="line">          style: TextStyle(fontSize: <span class="number">20</span>),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="设置页的-主题模式切换和多语言切换部分"><a href="#设置页的-主题模式切换和多语言切换部分" class="headerlink" title="设置页的 主题模式切换和多语言切换部分"></a>设置页的 <code>主题模式切换</code>和<code>多语言切换</code>部分</h3><p>打开文件<code>lib\views\settings\widgets\common_settings.dart</code>，编辑其内容如以下代码：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:provider/provider.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:deep_sky_app/generated/l10n.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:deep_sky_app/provider/locale_provider.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:deep_sky_app/provider/theme_provider.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommonSettings</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      <span class="comment">// 使用 MediaQuery 获取屏幕宽度</span></span><br><span class="line">      width: MediaQuery.of(context).size.width,</span><br><span class="line">      child: Column(</span><br><span class="line">        <span class="comment">// 交叉轴对齐方式</span></span><br><span class="line">        crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">        children: [</span><br><span class="line">          Padding(</span><br><span class="line">            padding: EdgeInsets.only(left: <span class="number">15</span>, top: <span class="number">10</span>),</span><br><span class="line">            child: Text(S.of(context).settings),</span><br><span class="line">          ),</span><br><span class="line">          SizedBox(</span><br><span class="line">            height: <span class="number">10</span>,</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            child: ExpansionTile(</span><br><span class="line">              title: Row(</span><br><span class="line">                <span class="comment">// 主轴对齐方式</span></span><br><span class="line">                mainAxisAlignment: MainAxisAlignment.spaceBetween,</span><br><span class="line">                children: [</span><br><span class="line">                  Text(S.of(context).themeMode),</span><br><span class="line">                  Text(ThemeProvider.getThemeModeName(</span><br><span class="line">                      Provider.of&lt;ThemeProvider&gt;(context).themeMode, context)),</span><br><span class="line">                ],</span><br><span class="line">              ),</span><br><span class="line">              children: [</span><br><span class="line">                <span class="comment">// system: 表示主题模式跟随系统</span></span><br><span class="line">                _themeModeItem(Icon(Icons.<span class="keyword">sync</span>), <span class="string">&#x27;system&#x27;</span>, context),</span><br><span class="line">                <span class="comment">// dark: 深色模式</span></span><br><span class="line">                _themeModeItem(Icon(Icons.brightness_2), <span class="string">&#x27;dark&#x27;</span>, context),</span><br><span class="line">                <span class="comment">// light：浅色模式</span></span><br><span class="line">                _themeModeItem(Icon(Icons.wb_sunny_outlined), <span class="string">&#x27;light&#x27;</span>, context),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            child: ExpansionTile(</span><br><span class="line">              title: Row(</span><br><span class="line">                mainAxisAlignment: MainAxisAlignment.spaceBetween,</span><br><span class="line">                children: [</span><br><span class="line">                  Text(S.of(context).settingLanguage),</span><br><span class="line">                  Text(LocaleProvider.localeName(</span><br><span class="line">                      Provider.of&lt;LocaleProvider&gt;(context).language, context)),</span><br><span class="line">                ],</span><br><span class="line">              ),</span><br><span class="line">              children: [</span><br><span class="line">                <span class="comment">// &#x27;&#x27;: 表示 语言跟随系统</span></span><br><span class="line">                _languageItem(<span class="string">&#x27;&#x27;</span>, context),</span><br><span class="line">                <span class="comment">// &#x27;zh&#x27;: 表示(简体)中文</span></span><br><span class="line">                _languageItem(<span class="string">&#x27;zh&#x27;</span>, context),</span><br><span class="line">                <span class="comment">// &#x27;en&#x27;: 表示 English</span></span><br><span class="line">                _languageItem(<span class="string">&#x27;en&#x27;</span>, context),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 多语言设置选项</span></span><br><span class="line">  Widget _languageItem(<span class="built_in">String</span> lang, context) &#123;</span><br><span class="line">    <span class="keyword">return</span> InkWell(</span><br><span class="line">      onTap: () &#123;</span><br><span class="line">        <span class="comment">// Provider 状态修改方式一：</span></span><br><span class="line">        Provider.of&lt;LocaleProvider&gt;(context, listen: <span class="keyword">false</span>)</span><br><span class="line">            .toggleChangeLocale(lang);</span><br><span class="line">      &#125;,</span><br><span class="line">      child: Container(</span><br><span class="line">        padding: EdgeInsets.only(</span><br><span class="line">          left: <span class="number">15</span>,</span><br><span class="line">          right: <span class="number">15</span>,</span><br><span class="line">          top: <span class="number">0</span>,</span><br><span class="line">          bottom: <span class="number">0</span>,</span><br><span class="line">        ),</span><br><span class="line">        child: Container(</span><br><span class="line">          <span class="comment">// 添加 ListTile 选中项的背景颜色</span></span><br><span class="line">          decoration: <span class="keyword">new</span> BoxDecoration(</span><br><span class="line">            color: Provider.of&lt;LocaleProvider&gt;(context).language == lang</span><br><span class="line">                ? Theme.of(context).buttonColor</span><br><span class="line">                : <span class="keyword">null</span>,</span><br><span class="line">          ),</span><br><span class="line">          child: ListTile(</span><br><span class="line">            leading: Icon(Icons.drag_handle),</span><br><span class="line">            title: Container(</span><br><span class="line">              <span class="comment">// 缩小 leading 和 title之的间隔</span></span><br><span class="line">              transform: Matrix4.translationValues(<span class="number">-20</span>, <span class="number">0.0</span>, <span class="number">0.0</span>),</span><br><span class="line">              child: Text(</span><br><span class="line">                LocaleProvider.localeName(lang, context),</span><br><span class="line">                <span class="comment">// style: TextStyle(</span></span><br><span class="line">                <span class="comment">//   color: Provider.of&lt;LocaleProvider&gt;(context).language == lang</span></span><br><span class="line">                <span class="comment">//       ? Theme.of(context).primaryColor</span></span><br><span class="line">                <span class="comment">//       : null,</span></span><br><span class="line">                <span class="comment">// ),</span></span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">            <span class="comment">// title: Text(LocaleProvider.localeName(lang, context)),</span></span><br><span class="line">            <span class="comment">// trailing: Opacity(</span></span><br><span class="line">            <span class="comment">//   opacity:</span></span><br><span class="line">            <span class="comment">//       Provider.of&lt;LocaleProvider&gt;(context).language == lang ? 1 : 0,</span></span><br><span class="line">            <span class="comment">//   child: Icon(Icons.done),</span></span><br><span class="line">            <span class="comment">// ),</span></span><br><span class="line">            trailing: Provider.of&lt;LocaleProvider&gt;(context).language == lang</span><br><span class="line">                ? Icon(Icons.done)</span><br><span class="line">                : <span class="keyword">null</span>,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 主题选择选项</span></span><br><span class="line">  Widget _themeModeItem(Icon icon, <span class="built_in">String</span> mode, context) &#123;</span><br><span class="line">    <span class="comment">// Provider 状态修改方式二：1. Consumer&lt;ThemeProvider&gt;(builder:)</span></span><br><span class="line">    <span class="keyword">return</span> Consumer&lt;ThemeProvider&gt;(</span><br><span class="line">      builder: (context, themeProvider, child) =&gt; InkWell(</span><br><span class="line">        onTap: () &#123;</span><br><span class="line">          <span class="comment">// Provider 状态修改方式二：2. 调用</span></span><br><span class="line">          themeProvider.toggleChangeTheme(mode);</span><br><span class="line">        &#125;,</span><br><span class="line">        child: Container(</span><br><span class="line">          padding: EdgeInsets.only(</span><br><span class="line">            left: <span class="number">15</span>,</span><br><span class="line">            right: <span class="number">15</span>,</span><br><span class="line">            top: <span class="number">0</span>,</span><br><span class="line">            bottom: <span class="number">0</span>,</span><br><span class="line">          ),</span><br><span class="line">          child: ListTile(</span><br><span class="line">            leading: icon,</span><br><span class="line">            title: Container(</span><br><span class="line">              <span class="comment">// 缩小 leading 和 title之的间隔</span></span><br><span class="line">              transform: Matrix4.translationValues(<span class="number">-20</span>, <span class="number">0.0</span>, <span class="number">0.0</span>),</span><br><span class="line">              child: Text(ThemeProvider.getThemeModeName(mode, context)),</span><br><span class="line">            ),</span><br><span class="line">            <span class="comment">// trailing: Opacity(</span></span><br><span class="line">            <span class="comment">//   opacity: themeProvider.themeMode == mode ? 1 : 0,</span></span><br><span class="line">            <span class="comment">//   child: Icon(Icons.done),</span></span><br><span class="line">            <span class="comment">// ),</span></span><br><span class="line">            trailing: themeProvider.themeMode == mode ? Icon(Icons.done) : <span class="keyword">null</span>,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="编辑设置页"><a href="#编辑设置页" class="headerlink" title="编辑设置页"></a>编辑设置页</h3><p>打开文件<code>lib\views\settings\settings_page.dart</code>，编辑其内容如以下代码：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:deep_sky_app/views/settings/widgets/account_info.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:deep_sky_app/views/settings/widgets/common_settings.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SettingsPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> SingleChildScrollView(</span><br><span class="line">      child: Container(</span><br><span class="line">        width: MediaQuery.of(context).size.width,</span><br><span class="line">        child: Column(</span><br><span class="line">          children: [</span><br><span class="line">            AccountInfo(),</span><br><span class="line">            SizedBox(</span><br><span class="line">              height: <span class="number">5</span>,</span><br><span class="line">            ),</span><br><span class="line">            CommonSettings(),</span><br><span class="line">            SizedBox(</span><br><span class="line">              height: <span class="number">5</span>,</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="运行项目"><a href="#运行项目" class="headerlink" title="运行项目"></a>运行项目</h2><p>启动项目调试，程序运行结果如下：</p>
<p>简体中文、浅色主题：</p>
<img src="/2021/02/04/flutter-introduction-part-II/02zh_light.png" class="" title="zh_light">

<p>English、深色主题：</p>
<img src="/2021/02/04/flutter-introduction-part-II/03en_dark.png" class="" title="en_dark">


<p>&#x3D;&#x3D;&#x3D;END&#x3D;&#x3D;&#x3D;</p>
<hr>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://hujiyi.github.io">laohoodman</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://hujiyi.github.io/2021/02/04/flutter-introduction-part-II/">https://hujiyi.github.io/2021/02/04/flutter-introduction-part-II/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://hujiyi.github.io" target="_blank">Laohoo</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/flutter/">flutter</a><a class="post-meta__tags" href="/tags/provider/">provider</a><a class="post-meta__tags" href="/tags/shared-preferences/">shared_preferences</a></div><div class="post-share"><div class="social-share" data-image="https://hujiyi.github.io/2021/02/02/flutter-introduction-part-I/flutter_eman_blog.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="/pluginsSrc/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="/pluginsSrc/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2021/11/15/hexo-with-butterfly/" title="使用 Butterfly 主题 搭建 Github Pages 上的 Hexo 博客"><img class="cover" src="https://hujiyi.github.io/2021/11/15/hexo-with-butterfly/butterfly_modify.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">使用 Butterfly 主题 搭建 Github Pages 上的 Hexo 博客</div></div><div class="info-2"><div class="info-item-1">安装前提安装 Hexo 需要先安装下列应用程序：   Node.js (Node.js 版本需不低于 10.13，建议使用 Node.js 12.0 及以上版本) Git   安装 hexo cli1npm install hexo-cli -g  初始化博客项目 创建 hexo 博客项目文件夹： hujiyi.github.io  进入文件后， 打开 Git Bash 命令行窗口  输入命令执行初始化：hexo init   1$ hexo init  程序初始化过程如下所示： 1234567891011$ hexo initINFO  Cloning hexo-starter https://github.com/hexojs/hexo-starter.gitINFO  Install dependencieswarning hexo-renderer-stylus &gt; stylus &gt; css-parse &gt; css &gt; urix@0.1.0: Please see...</div></div></div></a><a class="pagination-related" href="/2021/02/02/flutter-introduction-part-I/" title="flutter introduction part I：创建项目及多语言国际化支持"><img class="cover" src="https://hujiyi.github.io/2021/02/02/flutter-introduction-part-I/flutter_eman_blog.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">flutter introduction part I：创建项目及多语言国际化支持</div></div><div class="info-2"><div class="info-item-1"> 特别说明：Flutter SDK 1.22.5 及以上版本需要依赖 Git ， 所以下面输入 flutter命令的时候，一般都是在 Git Bash 命令行窗口 中进行。   D:\sources\flutter_repos 是专门用于保存 Flutter 项目的文件夹。  创建项目在 D:\sources\flutter_repos(或其他用于保存 Flutter 项目的文件夹) 文件夹下鼠标右键，在弹出的快捷菜单中选择Git Bash Here 打开 Git Bash 命令行窗口    在打开的Git Bash 命令行窗口中输入命令： flutter create...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2021/12/04/flutter-development-environment-configuration/" title="在 Windows 10&#x2F;11 配置 Flutter 开发环境"><img class="cover" src="https://hujiyi.github.io/2021/02/02/flutter-introduction-part-I/flutter_eman_blog.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-04</div><div class="info-item-2">在 Windows 10&#x2F;11 配置 Flutter 开发环境</div></div><div class="info-2"><div class="info-item-1">关联文章 在 Windows 中同时安装多个 JDK  使用 Android SDK 命令行工具搭建 Flutter 开发环境   安装 Flutter SDKFlutter 到现在为止, 还处于高速发展的初始阶段, Flutter SDK 的各个大版本之间, 存在一些不兼容的情况, 所以建议选择使用 stable 发行通道的 Flutter SDK 最新版本。 下载 Flutter SDKFlutter SDK 下载地址：  Flutter 官方网站：https://docs.flutter.dev/development/tools/sdk/releases  清华大学镜像：https://mirrors.tuna.tsinghua.edu.cn/flutter/flutter_infra_release/releases/stable/windows/   解压 Flutter SDK将压缩包解压, 然后把其中的 flutter 目录整个放在你想放置 Flutter SDK 的路径中（例如 D:\AppData, 解压后路径为: D:\AppData\flutter）,...</div></div></div></a><a class="pagination-related" href="/2023/02/27/flutter-tutorial-toc/" title="Flutter Tutorial Table Of Content"><img class="cover" src="https://hujiyi.github.io/2021/02/02/flutter-introduction-part-I/flutter_eman_blog.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-27</div><div class="info-item-2">Flutter Tutorial Table Of Content</div></div><div class="info-2"><div class="info-item-1"> 目录 基础组件 Flutter 基础组件 - 图片和图标组件  布局组件 Flutter 布局组件 - 水平&#x2F;垂直组件(Row&#x2F;Column)  [Flutter 布局组件 - 叠加布局组件(Stack&#x2F;IndexedStack)]  [Flutter 布局组件 - 流式布局组件(Wrap)]  [Flutter 布局组件 - 自定义布局组件(Flow)]   定位装饰权重组件 Flutter 定位装饰权重组件 - 定位装饰组件(Container)  滚动组件 [Flutter 滚动组件 - ListView]  [Flutter 滚动组件 - GridView]  [Flutter 滚动组件 - PageView]   数据组件 [Flutter 数据组件 - DataTable]  布局实例 Flutter 布局实例 - 静态布局构建实例  [Flutter 布局实例 - 无限滚动布局实例]   状态管理 Flutter Riverpod 使用示例 - 计数器  开始使用 Flutter Riverpod 进行状态管理(一)  开始使用...</div></div></div></a><a class="pagination-related" href="/2022/10/09/install-flutter-on-linux-mint-21/" title="在 Linux Mint 21 安装 Flutter 开发环境"><img class="cover" src="https://hujiyi.github.io/2021/02/02/flutter-introduction-part-I/flutter_eman_blog.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-09</div><div class="info-item-2">在 Linux Mint 21 安装 Flutter 开发环境</div></div><div class="info-2"><div class="info-item-1">开发环境： Dell Inspiron I5 7559   Intel Core i5 6th Gen 6300HQ (2.30GHz)  NVIDIA GeForce GTX 960M   Linux Mint 21 5.15.0-48-generic, locale en_US.UTF-8   OpenJDK Runtime Environment (build 11.0.16+8-post-Ubuntu-0ubuntu122.04)  Visual Studio Code 1.72.0  Flutter version 3.3.4 on channel stable  Git 2.34.1    前段时间把用了六年的 Dell Inspiron I5 7559 处理了一下: 拆掉失效的电池; 把买电脑时自带的 128GB 固态硬盘装回去; 把500GB的机械硬盘拆下来, 放到硬盘底座上当个移动硬盘用; 然后给它安装了一个 Linux Mint 21。 本来想给 NVIDIA GeForce GTX 960M 显卡安装一个 NVIDIA 驱动的, 试着安装了几个版本不成功,...</div></div></div></a><a class="pagination-related" href="/2022/05/04/use-freezed-with-flutter/" title="在 Flutter 中使用 Freezed"><img class="cover" src="https://hujiyi.github.io/2021/02/02/flutter-introduction-part-I/flutter_eman_blog.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-04</div><div class="info-item-2">在 Flutter 中使用 Freezed</div></div><div class="info-2"><div class="info-item-1">https://github.com/rrousselGit/freezed https://www.developer.school/tutorials/how-to-use-freezed-with-flutter https://runble1.com/flutter-freezed-tutorial/ Freezed 是一个不可变类的代码生成器, 用于数据类&#x2F;联合&#x2F;模式匹配&#x2F;克隆的代码生成器。不可变类的代码生成具有简单的语法&#x2F;API，而不会影响功能。 在 Dart/Flutter 中定义模型(model)的时候, 经常要附加以下的工作：  定义一个构造函数+属性 覆盖 toString、运算符 &#x3D;&#x3D;、hashCode 实现一个 copyWith 方法来克隆对象 处理反序列化  除此之外，Dart 还缺少联合类型和模式匹配等功能。实现所有这些可能需要数百行代码，这很容易出错并且模型的可读性显着。 Freezed...</div></div></div></a><a class="pagination-related" href="/2022/04/09/flutter-navigator-using-go-router/" title="在 Flutter中使用 go_router 配置路由"><img class="cover" src="https://hujiyi.github.io/2021/02/02/flutter-introduction-part-I/flutter_eman_blog.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-09</div><div class="info-item-2">在 Flutter中使用 go_router 配置路由</div></div><div class="info-2"><div class="info-item-1">go_router 基于 Navigation 2 的 Flutter 声明式路由, 通过使用声明式路由来降低复杂性, 适用于各种不同的目标平台(mobile、Web、desktop), 是由 Flutter 生态系统委员会选出的表现出最高质量水平的软件包(Flutter Favorites)。 开发环境： Microsoft Windows 10 Enterprise LTSC [Version 10.0.19044.1586], locale zh-CN  Flutter 2.10.3 • Channel Stable, Dart 2.16.1   Visual Studio Code, 64-bit edition (version 1.66.1)  OpenJDK Runtime Environment (build 11.0.11+9-b60-7590822)  Android SDK version 30.0.3, Platform android-31, build-tools 30.0.3   新建项目执行命令，创建新项目：flutter create...</div></div></div></a><a class="pagination-related" href="/2022/03/18/build-flutter-dev-environment-with-cmdline-tools/" title="使用 Android SDK 命令行工具搭建 Flutter 开发环境"><img class="cover" src="https://hujiyi.github.io/2021/02/02/flutter-introduction-part-I/flutter_eman_blog.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-18</div><div class="info-item-2">使用 Android SDK 命令行工具搭建 Flutter 开发环境</div></div><div class="info-2"><div class="info-item-1">准备的软件： Flutter SDK (stable channel), 下载地址：https://docs.flutter.dev/development/tools/sdk/releases  OpenJDK 11 (可以使用其他的 JDK, 最低版本要求是 11, 可以使用更高版本的 JDK )  Android SDK Command-line Tools(latest) 下载地址：https://developer.android.google.cn/studio?hl=zh-cn#command-tools  Visual Studio Code 下载地址：https://code.visualstudio.com/Download  雷电模拟器、 夜神模拟器 或 Android Studio 自带的模拟器任选一个（也可以使用其他可以连接到开发工具的模拟器）,雷电模拟器 安装好即可使用; 夜神模拟器 需要做一个额外的配置。    最新版的 Android Studio 安装文件夹下的 jre 文件夹是自带的 OpenJDK 11.0.10, 我从另外一台安装有...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://hujiyi.github.io/2020/02/29/use-hexo-tag-cloud/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">laohoodman</div><div class="author-info-description">如果你交给某人一个程序，你将折磨他一整天；如果你教某人如何编写程序，你将折磨他一辈子。 —— David Leinweber.</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">62</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">56</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/hujiyi"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/hujiyi" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">1.</span> <span class="toc-text">准备工作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E5%AF%BC%E8%88%AA%E9%A1%B5"><span class="toc-number">2.</span> <span class="toc-text">主导航页</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0-Provider-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E7%B1%BB"><span class="toc-number">3.</span> <span class="toc-text">添加 Provider 状态管理类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%A2%98%E6%A8%A1%E5%BC%8F%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-number">3.1.</span> <span class="toc-text">主题模式状态管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%AF%AD%E8%A8%80%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-number">3.2.</span> <span class="toc-text">多语言状态管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6-main-dart"><span class="toc-number">4.</span> <span class="toc-text">修改入口文件 main.dart</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E9%A1%B5"><span class="toc-number">5.</span> <span class="toc-text">设置页</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E9%A1%B5%E7%9A%84%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E9%83%A8%E5%88%86"><span class="toc-number">5.1.</span> <span class="toc-text">设置页的用户信息部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E9%A1%B5%E7%9A%84-%E4%B8%BB%E9%A2%98%E6%A8%A1%E5%BC%8F%E5%88%87%E6%8D%A2%E5%92%8C%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%88%87%E6%8D%A2%E9%83%A8%E5%88%86"><span class="toc-number">5.2.</span> <span class="toc-text">设置页的 主题模式切换和多语言切换部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E8%AE%BE%E7%BD%AE%E9%A1%B5"><span class="toc-number">5.3.</span> <span class="toc-text">编辑设置页</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E9%A1%B9%E7%9B%AE"><span class="toc-number">6.</span> <span class="toc-text">运行项目</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/11/16/learn-vue3-000/" title="Learn Vue3 目录"><img src="https://hujiyi.github.io/2024/11/16/hello-world/00/vuetoc.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Learn Vue3 目录"/></a><div class="content"><a class="title" href="/2024/11/16/learn-vue3-000/" title="Learn Vue3 目录">Learn Vue3 目录</a><time datetime="2024-11-16T12:35:53.000Z" title="发表于 2024-11-16 20:35:53">2024-11-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/27/flutter-tutorial-toc/" title="Flutter Tutorial Table Of Content"><img src="https://hujiyi.github.io/2021/02/02/flutter-introduction-part-I/flutter_eman_blog.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Flutter Tutorial Table Of Content"/></a><div class="content"><a class="title" href="/2023/02/27/flutter-tutorial-toc/" title="Flutter Tutorial Table Of Content">Flutter Tutorial Table Of Content</a><time datetime="2023-02-27T05:11:08.000Z" title="发表于 2023-02-27 13:11:08">2023-02-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/16/linux-from-scratch-toc/" title="从 Linux From Scratch 构建自己的操作系统 - 目录"><img src="https://hujiyi.github.io/2023/02/16/linux-from-scratch-toc/Linux-From-Scratch.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从 Linux From Scratch 构建自己的操作系统 - 目录"/></a><div class="content"><a class="title" href="/2023/02/16/linux-from-scratch-toc/" title="从 Linux From Scratch 构建自己的操作系统 - 目录">从 Linux From Scratch 构建自己的操作系统 - 目录</a><time datetime="2023-02-16T05:04:02.000Z" title="发表于 2023-02-16 13:04:02">2023-02-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/05/installing-mysql-zip-archive-in-windows/" title="在 Windows 安装解压版的 MySQL 8"><img src="https://hujiyi.github.io/2023/01/05/installing-mysql-zip-archive-in-windows/admin-mysql-logo900.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在 Windows 安装解压版的 MySQL 8"/></a><div class="content"><a class="title" href="/2023/01/05/installing-mysql-zip-archive-in-windows/" title="在 Windows 安装解压版的 MySQL 8">在 Windows 安装解压版的 MySQL 8</a><time datetime="2023-01-05T05:05:51.000Z" title="发表于 2023-01-05 13:05:51">2023-01-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/21/build-vue3-desktop-app-with-vite-electron-vuetify/" title="使用 electron 和 vuetify 创建 Vue3 桌面应用程序"><img src="/2022/11/21/build-vue3-desktop-app-with-vite-electron-vuetify/electron.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用 electron 和 vuetify 创建 Vue3 桌面应用程序"/></a><div class="content"><a class="title" href="/2022/11/21/build-vue3-desktop-app-with-vite-electron-vuetify/" title="使用 electron 和 vuetify 创建 Vue3 桌面应用程序">使用 electron 和 vuetify 创建 Vue3 桌面应用程序</a><time datetime="2022-11-21T01:23:54.000Z" title="发表于 2022-11-21 09:23:54">2022-11-21</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 By laohoodman</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script src="/js/jquery.min.js"></script><script src="/js/fishes.js"></script><script src="/js/fish.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/pluginsSrc/butterfly-extsrc/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>