<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>使用 Flask 编写 RESTful API | Laohoo</title><meta name="author" content="laohoodman"><meta name="copyright" content="laohoodman"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="HTTP 的常用请求方法如下:   HTTP 方法 行为 示例    GET 获取资源的信息 http:&#x2F;&#x2F;example.com&#x2F;api&#x2F;orders   GET 获取某个特定资源的信息 http:&#x2F;&#x2F;example.com&#x2F;api&#x2F;orders&#x2F;123   POST 创建新资源 http:&#x2F;&#x2F;example.com&#x2F;api&#x2F;orders   PUT 更新资源 http:&#x2F;&#x2F;example.co">
<meta property="og:type" content="article">
<meta property="og:title" content="使用 Flask 编写 RESTful API">
<meta property="og:url" content="https://hujiyi.github.io/2021/12/09/flask-webapi/index.html">
<meta property="og:site_name" content="Laohoo">
<meta property="og:description" content="HTTP 的常用请求方法如下:   HTTP 方法 行为 示例    GET 获取资源的信息 http:&#x2F;&#x2F;example.com&#x2F;api&#x2F;orders   GET 获取某个特定资源的信息 http:&#x2F;&#x2F;example.com&#x2F;api&#x2F;orders&#x2F;123   POST 创建新资源 http:&#x2F;&#x2F;example.com&#x2F;api&#x2F;orders   PUT 更新资源 http:&#x2F;&#x2F;example.co">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hujiyi.github.io/2021/12/09/flask-webapi/flask.png">
<meta property="article:published_time" content="2021-12-09T12:59:24.000Z">
<meta property="article:modified_time" content="2022-10-11T01:40:13.219Z">
<meta property="article:author" content="laohoodman">
<meta property="article:tag" content="python">
<meta property="article:tag" content="flask">
<meta property="article:tag" content="webapi">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hujiyi.github.io/2021/12/09/flask-webapi/flask.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://hujiyi.github.io/2021/12/09/flask-webapi/index.html"><link rel="preconnect"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: '/pluginsSrc/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '使用 Flask 编写 RESTful API',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://hujiyi.github.io/2020/02/29/use-hexo-tag-cloud/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">62</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">56</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://hujiyi.github.io/2021/12/09/flask-webapi/flask.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Laohoo</span></a><a class="nav-page-title" href="/"><span class="site-name">使用 Flask 编写 RESTful API</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">使用 Flask 编写 RESTful API</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-12-09T12:59:24.000Z" title="发表于 2021-12-09 20:59:24">2021-12-09</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-11T01:40:13.219Z" title="更新于 2022-10-11 09:40:13">2022-10-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/flask/">flask</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">2.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>12分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="HTTP-的常用请求方法如下"><a href="#HTTP-的常用请求方法如下" class="headerlink" title="HTTP 的常用请求方法如下:"></a>HTTP 的常用请求方法如下:</h1><table>
<thead>
<tr>
<th>HTTP 方法</th>
<th>行为</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>GET</td>
<td>获取资源的信息</td>
<td><a target="_blank" rel="noopener" href="http://example.com/api/orders">http://example.com/api/orders</a></td>
</tr>
<tr>
<td>GET</td>
<td>获取某个特定资源的信息</td>
<td><a target="_blank" rel="noopener" href="http://example.com/api/orders/123">http://example.com/api/orders/123</a></td>
</tr>
<tr>
<td>POST</td>
<td>创建新资源</td>
<td><a target="_blank" rel="noopener" href="http://example.com/api/orders">http://example.com/api/orders</a></td>
</tr>
<tr>
<td>PUT</td>
<td>更新资源</td>
<td><a target="_blank" rel="noopener" href="http://example.com/api/orders/123">http://example.com/api/orders/123</a></td>
</tr>
<tr>
<td>PATCH</td>
<td>对 PUT 方法的补充，用来对已知资源进行局部更新</td>
<td><a target="_blank" rel="noopener" href="http://example.com/api/orders/123">http://example.com/api/orders/123</a></td>
</tr>
<tr>
<td>DELETE</td>
<td>删除资源</td>
<td><a target="_blank" rel="noopener" href="http://example.com/api/orders/123">http://example.com/api/orders/123</a></td>
</tr>
</tbody></table>
<blockquote>
<p>REST 设计不需要特定的数据格式。在请求中数据可以以 JSON 形式, 或者有时候作为 url 中查询参数项。</p>
</blockquote>
<h1 id="RESTful-API规划"><a href="#RESTful-API规划" class="headerlink" title="RESTful API规划"></a>RESTful API规划</h1><table>
<thead>
<tr>
<th>HTTP 方法</th>
<th>URL</th>
<th>动作</th>
</tr>
</thead>
<tbody><tr>
<td>GET</td>
<td><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/api/v1/books">http://127.0.0.1:5000/api/v1/books</a></td>
<td>查询图书列表，支持分页查询，分页的参数为JSON格式数据：<code>&#123;&quot;limit&quot;:10, &quot;offset&quot;:0&#125;</code></td>
</tr>
<tr>
<td>POST</td>
<td><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/api/v1/books">http://127.0.0.1:5000/api/v1/books</a></td>
<td>添加新图书</td>
</tr>
<tr>
<td>GET</td>
<td><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/api/v1/books/[book_id]">http://127.0.0.1:5000/api/v1/books/[book_id]</a></td>
<td>查询指定 id 的一本图书</td>
</tr>
<tr>
<td>PUT</td>
<td><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/api/v1/books/[book_id]">http://127.0.0.1:5000/api/v1/books/[book_id]</a></td>
<td>更新指定 id 的图书</td>
</tr>
<tr>
<td>PATCH</td>
<td><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/api/v1/books/[book_id]">http://127.0.0.1:5000/api/v1/books/[book_id]</a></td>
<td>更新指定 id 的图书, 与 <code>PUT</code> 方法相同</td>
</tr>
<tr>
<td>DELETE</td>
<td><a target="_blank" rel="noopener" href="http://127.0.0.1:5000/api/v1/books/[book_id]">http://127.0.0.1:5000/api/v1/books/[book_id]</a></td>
<td>删除指定 id 的图书</td>
</tr>
</tbody></table>
<blockquote>
<p><code>添加</code>、<code>修改</code> 图书时，图书信息为 <code>JSON</code> 数据， 数据格式示例：<code>&#123;&quot;title&quot;:&quot;Python Web&quot;,&quot;author&quot;:&quot;Tony John&quot;,&quot;summary&quot;:&quot;This is a good book&quot;,&quot;published&quot;:&quot;2020&quot;&#125;</code> </p>
</blockquote>
<blockquote>
<p>实际部署时，将 <code>URL</code> 中的 <code>127.0.0.1:5000</code> 替换为相应的 <code>主机名</code> 或 <code>IP地址</code> </p>
</blockquote>
<h1 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h1><p>创建名为 <code>flask-book-app</code> 的 <code>flask</code> 项目(步骤略)</p>
<p>项目中需要的包：</p>
<ol>
<li><p><code>flask</code>： Python 编写的 Web 应用程序框架</p>
</li>
<li><p><code>python-dotenv</code>: 从文件中读取键值对，并将其设置为环境变量</p>
</li>
<li><p><code>flask-sqlalchemy</code>： 数据库 ORM</p>
</li>
<li><p><code>flask-restful</code>: 快速构建 REST APIs 的 Flask 扩展</p>
</li>
<li><p><code>flask-marshmallow</code>：序列化和反序列化模块, 用来将复杂的 orm 对象 与 python 原生数据类型之间相互转换的库</p>
</li>
<li><p><code>flask-cors</code>： 跨域请求配置模块</p>
</li>
<li><p><code>marshmallow-sqlalchemy</code>: 用于 <code>flask-marshmallow</code> 与 <code>flask-sqlalchemy</code> 的集成</p>
</li>
</ol>
<p>添加配置文件 <code>.flaskenv</code>, 内容如以下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FLASK_ENV=development</span><br><span class="line">FLASK_APP=bookapp</span><br></pre></td></tr></table></figure>

<h1 id="使用包组织项目代码"><a href="#使用包组织项目代码" class="headerlink" title="使用包组织项目代码"></a>使用包组织项目代码</h1><p><code>Flask </code>对项目结构没有固定要求，可以将所有代码放在 <code>app.py</code> 文件中, 但是这样会导致代码难以阅读和修改，因此这里使用包来组织整个项目的代码。</p>
<p>项目的最终结构如以下图所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">|-- bookapp              --- 包名</span><br><span class="line">|   |-- __init__.py      --- 包构造文件，创建程序实例</span><br><span class="line">|   |-- command.py       --- 命令函数</span><br><span class="line">|   |-- models.py        --- 模型类</span><br><span class="line">|   `-- views.py         --- 视图函数，编写 RESTful API 的方法</span><br><span class="line">|-- venv                 --- 虚拟环境文件夹</span><br><span class="line">`-- data.db              --- Sqlite 数据库文件</span><br></pre></td></tr></table></figure>


<p>添加文件夹  <code>bookapp</code>, 并在该文件夹中添加两个文件： <code>__init__.py</code>, <code>views.py</code></p>
<p>编辑文件 <code>bookapp\__init__.py</code>, 内容如以下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> bookapp <span class="keyword">import</span> views</span><br></pre></td></tr></table></figure>


<p>编辑 <code>bookapp\views.py</code>, 内容如以下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bookapp <span class="keyword">import</span> app</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello world&#x27;</span></span><br></pre></td></tr></table></figure>


<p>运行项目, 效果如下图:</p>
<img src="/2021/12/09/flask-webapi/001.png" class="" title="flask run">


<h1 id="使用数据库"><a href="#使用数据库" class="headerlink" title="使用数据库"></a>使用数据库</h1><p>编辑 <code>bookapp\__init__.py</code>, 内容如以下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line">app.config[<span class="string">&#x27;SQLALCHEMY_DATABASE_URI&#x27;</span>] = <span class="string">&#x27;sqlite:///&#x27;</span> + \</span><br><span class="line">    os.path.join(os.path.dirname(app.root_path), <span class="string">&#x27;data.db&#x27;</span>)</span><br><span class="line">app.config[<span class="string">&#x27;SQLALCHEMY_TRACK_MODIFICATIONS&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">db = SQLAlchemy(app)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 确保这一行放在最后面</span></span><br><span class="line"><span class="keyword">from</span> bookapp <span class="keyword">import</span> views, models </span><br></pre></td></tr></table></figure>

<h1 id="添加数据模型类"><a href="#添加数据模型类" class="headerlink" title="添加数据模型类"></a>添加数据模型类</h1><p>在 <code>bookapp</code> 文件夹中添加文件 <code>models.py</code>, 编辑代码如以下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bookapp <span class="keyword">import</span> db</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>(db.Model):</span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    title = db.Column(db.String(<span class="number">50</span>))  <span class="comment"># 标题</span></span><br><span class="line">    author = db.Column(db.String(<span class="number">50</span>))  <span class="comment"># 作者</span></span><br><span class="line">    summary = db.Column(db.String(<span class="number">250</span>))  <span class="comment"># 摘要</span></span><br><span class="line">    published = db.Column(db.String(<span class="number">4</span>))  <span class="comment"># 发行年份</span></span><br></pre></td></tr></table></figure>

<h1 id="添加的命令实现数据库初始化"><a href="#添加的命令实现数据库初始化" class="headerlink" title="添加的命令实现数据库初始化"></a>添加的命令实现数据库初始化</h1><p>在 <code>bookapp</code> 文件夹中添加文件 <code>command.py</code>, 编辑代码如以下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> click</span><br><span class="line"><span class="keyword">from</span> bookapp <span class="keyword">import</span> app, db</span><br><span class="line"><span class="keyword">from</span> bookapp.models <span class="keyword">import</span> Book</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.cli.command()</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">forge</span>():</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    用于初始化数据库的指令， 在虚拟环境下运行： flask forge</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    db.create_all()</span><br><span class="line">    books = [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;A Fire Upon the Deep&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;author&#x27;</span>: <span class="string">&#x27;Vernor Vinge&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;summary&#x27;</span>: <span class="string">&#x27;The coldsleep itself was dreamless.&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;published&#x27;</span>: <span class="string">&#x27;1992&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;The Ones Who Walk Away From Omelas&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;author&#x27;</span>: <span class="string">&#x27;Ursula K. Le Guin&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;summary&#x27;</span>: <span class="string">&#x27;With a clamor of bells that set the swallows soaring, the Festival of Summer came to the city Omelas, bright-towered by the sea.&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;published&#x27;</span>: <span class="string">&#x27;1973&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;Dhalgren&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;author&#x27;</span>: <span class="string">&#x27;Samuel R. Delany&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;summary&#x27;</span>: <span class="string">&#x27;to wound the autumnal city.&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;published&#x27;</span>: <span class="string">&#x27;1975&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;JavaScript Programming&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;author&#x27;</span>: <span class="string">&#x27;Samuel R. Delany&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;summary&#x27;</span>: <span class="string">&#x27;to wound the autumnal city.&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;published&#x27;</span>: <span class="string">&#x27;2015&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;Flask Web Development&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;author&#x27;</span>: <span class="string">&#x27;Ursula K. Le Guin&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;summary&#x27;</span>: <span class="string">&#x27;With a clamor of bells that set the swallows soaring, the Festival of Summer came to the city Omelas, bright-towered by the sea.&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;published&#x27;</span>: <span class="string">&#x27;2018&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> books:</span><br><span class="line">        book = Book(</span><br><span class="line">            title=item[<span class="string">&#x27;title&#x27;</span>],</span><br><span class="line">            author=item[<span class="string">&#x27;author&#x27;</span>],</span><br><span class="line">            summary=item[<span class="string">&#x27;summary&#x27;</span>],</span><br><span class="line">            published=item[<span class="string">&#x27;published&#x27;</span>]</span><br><span class="line">        )</span><br><span class="line">        db.session.add(book)</span><br><span class="line">    db.session.commit()</span><br><span class="line">    click.echo(<span class="string">&#x27;database initialized.&#x27;</span>)</span><br></pre></td></tr></table></figure>



<p>编辑 <code>bookapp\__init__.py</code>, 在<code>最后一行</code>添加 <code>command</code> 模块的导入, 如以下代码:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line">app.config[<span class="string">&#x27;SQLALCHEMY_DATABASE_URI&#x27;</span>] = <span class="string">&#x27;sqlite:///&#x27;</span> + \</span><br><span class="line">    os.path.join(os.path.dirname(app.root_path),	<span class="string">&#x27;data.db&#x27;</span>)</span><br><span class="line">app.config[<span class="string">&#x27;SQLALCHEMY_TRACK_MODIFICATIONS&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">db = SQLAlchemy(app)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 确保这一行放在最后面, </span></span><br><span class="line"><span class="keyword">from</span> bookapp <span class="keyword">import</span> views, models, command  <span class="comment"># 这里多了一个 command 模块</span></span><br></pre></td></tr></table></figure>


<p>在项目的虚拟环境下执行 <code>flask forge</code> 命令初始化数据，并添加数据到数据库中：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(venv) <span class="built_in">PS</span> D:\sources\python_repos\flask<span class="literal">-book-app</span>&gt; flask forge</span><br><span class="line">database initialized.</span><br></pre></td></tr></table></figure>


<h1 id="编写-API-方法-组织-Flask-RESTful-资源对象"><a href="#编写-API-方法-组织-Flask-RESTful-资源对象" class="headerlink" title="编写 API 方法 ( 组织 Flask-RESTful 资源对象)"></a>编写 API 方法 ( 组织 Flask-RESTful 资源对象)</h1><p>编辑 <code>bookapp\views.py</code>, 内容如以下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bookapp <span class="keyword">import</span> app, db, ma, api</span><br><span class="line"><span class="keyword">from</span> bookapp.models <span class="keyword">import</span> Book</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> jsonify, redirect, request</span><br><span class="line"><span class="keyword">from</span> flask_restful <span class="keyword">import</span> Resource</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BookSchema</span>(ma.Schema):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        <span class="comment"># 需要序列化的字段, 只有在这里列出的字段名才会转为 json 数据</span></span><br><span class="line">        fields = (<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;author&#x27;</span>, <span class="string">&#x27;summary&#x27;</span>, <span class="string">&#x27;published&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 单个模型数据的序列化</span></span><br><span class="line">book_schema = BookSchema()</span><br><span class="line"><span class="comment"># 多个模型数据的序列化</span></span><br><span class="line">books_schema = BookSchema(many=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BookListResource</span>(<span class="title class_ inherited__">Resource</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        查询图书，分页参数的请求格式：http://127.0.0.1:5000/api/v1/books?limit=3&amp;offset=3</span></span><br><span class="line"><span class="string">        使用默认参数的访问路径：http://127.0.0.1:5000/api/v1/books        </span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 分页的默认值</span></span><br><span class="line">        limit = <span class="number">10</span>     <span class="comment"># 每页大小（返回记录数）</span></span><br><span class="line">        offset = <span class="number">0</span>     <span class="comment"># 跳过记录数       </span></span><br><span class="line"></span><br><span class="line">        <span class="comment">##### 接收 json 格式的参数 开始 , 这个方式不支持 url 地址传递的参数</span></span><br><span class="line">        <span class="comment">#  如果要从URL中接收参数，请导入  from flask_restful.reqparse import RequestParser         </span></span><br><span class="line">        <span class="keyword">try</span>:  <span class="comment"># 加入异常处理，以防接收不到正确参数时程序崩溃</span></span><br><span class="line">            <span class="keyword">if</span>(request.json):</span><br><span class="line">                limit = request.json[<span class="string">&#x27;limit&#x27;</span>]</span><br><span class="line">                offset = request.json[<span class="string">&#x27;offset&#x27;</span>]</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="comment">##### 接收 json 格式的参数 结束 </span></span><br><span class="line"></span><br><span class="line">        query = Book.query.offset(offset).limit(limit)  <span class="comment"># 分页查询</span></span><br><span class="line">        total = Book.query.count()         <span class="comment"># 记录总数</span></span><br><span class="line">        books = books_schema.dump(query)   <span class="comment"># 将查询结果由对象类型转为 python 数据</span></span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;                   <span class="comment"># 以JSON格式数据返回查询结果 </span></span><br><span class="line">            <span class="string">&quot;offset&quot;</span>: offset,</span><br><span class="line">            <span class="string">&quot;limit&quot;</span>: limit,</span><br><span class="line">            <span class="string">&quot;total_count&quot;</span>: total,</span><br><span class="line">            <span class="string">&quot;books&quot;</span>: books</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        添加一本图书, 每本图书四个属性，不能为缺少</span></span><br><span class="line"><span class="string">        访问路径：http://127.0.0.1:5000/api/v1/books</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            new_book = Book(                  <span class="comment"># 创建新图书</span></span><br><span class="line">                title=request.json[<span class="string">&#x27;title&#x27;</span>],</span><br><span class="line">                author=request.json[<span class="string">&#x27;author&#x27;</span>],</span><br><span class="line">                summary=request.json[<span class="string">&#x27;summary&#x27;</span>],</span><br><span class="line">                published=request.json[<span class="string">&#x27;published&#x27;</span>]</span><br><span class="line">            )</span><br><span class="line">            db.session.add(new_book)    <span class="comment"># 添加图书</span></span><br><span class="line">            db.session.commit()         <span class="comment"># 提交会话</span></span><br><span class="line">            <span class="keyword">return</span> book_schema.dump(new_book)  <span class="comment"># 将查询结果由对象类型转为 python 数据</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="comment"># return request.json[&#x27;title&#x27;]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BookResource</span>(<span class="title class_ inherited__">Resource</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, book_id</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        查询指定 id 的图书, 访问路径：http://127.0.0.1:5000/api/v1/books/2</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        book = Book.query.get_or_404(book_id)   <span class="comment"># 查询指定id的图书</span></span><br><span class="line">        <span class="keyword">return</span> book_schema.dump(book)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">patch</span>(<span class="params">self, book_id</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        修改指定 id 的图书</span></span><br><span class="line"><span class="string">        patch 指令是 put 指令的升级，允许局部更新</span></span><br><span class="line"><span class="string">        访问路径：http://127.0.0.1:5000/api/v1/books/2 (同时带上要修改的属性值 )</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            book = Book.query.get_or_404(book_id)  <span class="comment"># 查询指定id的图书</span></span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;title&#x27;</span> <span class="keyword">in</span> request.json:            <span class="comment"># 修改数据</span></span><br><span class="line">                book.title = request.json[<span class="string">&#x27;title&#x27;</span>]</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;author&#x27;</span> <span class="keyword">in</span> request.json:</span><br><span class="line">                book.author = request.json[<span class="string">&#x27;author&#x27;</span>]</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;summary&#x27;</span> <span class="keyword">in</span> request.json:</span><br><span class="line">                book.summary = request.json[<span class="string">&#x27;summary&#x27;</span>]</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;published&#x27;</span> <span class="keyword">in</span> request.json:</span><br><span class="line">                book.published = request.json[<span class="string">&#x27;published&#x27;</span>]</span><br><span class="line">            db.session.commit()            <span class="comment"># 提交会话</span></span><br><span class="line">            <span class="keyword">return</span> book_schema.dump(book)  <span class="comment"># 返回修改成功后的图书信息</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">put</span>(<span class="params">self, book_id</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        put 指令 和 patch 指令是一样的</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.patch(book_id)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">delete</span>(<span class="params">self, book_id</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27; </span></span><br><span class="line"><span class="string">        删除指定 id 的图书</span></span><br><span class="line"><span class="string">        访问路径：http://127.0.0.1:5000/api/v1/books/2</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        book = Book.query.get_or_404(book_id)  <span class="comment"># 查询指定id的图书</span></span><br><span class="line">        db.session.delete(book)                <span class="comment"># 删除图书</span></span><br><span class="line">        db.session.commit()                    <span class="comment"># 提交会话</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>, <span class="number">204</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="comment"># 跳转到 api对应的地址</span></span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&#x27;/api/v1/books&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="绑定资源与URI"><a href="#绑定资源与URI" class="headerlink" title="绑定资源与URI"></a>绑定资源与URI</h1><p>编辑 <code>bookapp\__init__.py</code>, 加入<code>跨域配置</code> 和 <code>序列化模块</code>, 代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy  <span class="comment"># 导入数据库 ORM 模块</span></span><br><span class="line"><span class="keyword">from</span> flask_cors <span class="keyword">import</span> CORS  <span class="comment"># 导入跨域配置模块</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># flask_marshmallow 序列化和反序列化模块，</span></span><br><span class="line"><span class="comment"># 用于将复杂的orm模型对象与python原生数据类型之间相互转换</span></span><br><span class="line"><span class="keyword">from</span> flask_marshmallow <span class="keyword">import</span> Marshmallow</span><br><span class="line"></span><br><span class="line"><span class="comment"># flask_restful 快速构建 REST APIs 的Flask 扩展</span></span><br><span class="line"><span class="comment"># http://www.pythondoc.com/Flask-RESTful/</span></span><br><span class="line"><span class="keyword">from</span> flask_restful <span class="keyword">import</span> Api</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)    <span class="comment"># 创建Flask实例</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 跨域允许</span></span><br><span class="line">CORS(app, resources=&#123;<span class="string">r&#x27;/*&#x27;</span>: &#123;<span class="string">&#x27;origins&#x27;</span>: <span class="string">&#x27;*&#x27;</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置数据库连接</span></span><br><span class="line">app.config[<span class="string">&#x27;SQLALCHEMY_DATABASE_URI&#x27;</span>] = <span class="string">&#x27;sqlite:///&#x27;</span> + \</span><br><span class="line">    os.path.join(os.path.dirname(app.root_path),	<span class="string">&#x27;data.db&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭数据库对象修改的跟踪</span></span><br><span class="line">app.config[<span class="string">&#x27;SQLALCHEMY_TRACK_MODIFICATIONS&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">db = SQLAlchemy(app)    <span class="comment"># 初始化扩展 SQLAlchemy， 传入程序实例 app</span></span><br><span class="line">ma = Marshmallow(app)   <span class="comment"># 初始化扩展 Marshmallow， 传入程序实例 app</span></span><br><span class="line">api = Api(app)          <span class="comment"># 初始化扩展 Api， 传入程序实例 app</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> bookapp <span class="keyword">import</span> views, models, command  <span class="comment"># 确保这一行放在最后面</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> bookapp.views <span class="keyword">import</span> BookListResource, BookResource    <span class="comment"># 导入资源类</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从 BookListResource 添加 api 资源,</span></span><br><span class="line"><span class="comment"># 对应分页查询 和 添加图书 这两个不需要 id 的操作</span></span><br><span class="line"><span class="comment"># 使用默认参数分页查询数据的地址：http://127.0.0.1:5000/api/v1/books</span></span><br><span class="line"><span class="comment"># 指定参数的分页查询数据的地址和参数示例：http://127.0.0.1:5000/api/v1/books?limit=3&amp;offset=3</span></span><br><span class="line"><span class="comment"># 添加数据的访问路径：http://127.0.0.1:5000/api/v1/books</span></span><br><span class="line">api.add_resource(BookListResource, <span class="string">&#x27;/api/v1/books&#x27;</span>)  <span class="comment"># 添加资源及访问路径</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从 BookResource 添加 api 资源，</span></span><br><span class="line"><span class="comment"># 对应 单个对图书查询， 删除、修改这三个 要指定 id 的操作</span></span><br><span class="line"><span class="comment"># 删除、修改和查询的访问路径：http://127.0.0.1:5000/api/v1/books/2</span></span><br><span class="line">api.add_resource(BookResource, <span class="string">&#x27;/api/v1/books/&lt;int:book_id&gt;&#x27;</span>)  <span class="comment"># 添加资源及访问路径</span></span><br></pre></td></tr></table></figure>



<h1 id="测试-RESTful-API"><a href="#测试-RESTful-API" class="headerlink" title="测试 RESTful API"></a>测试 RESTful API</h1><h2 id="运行项目"><a href="#运行项目" class="headerlink" title="运行项目"></a>运行项目</h2><p>在虚拟环境下执行命令： flask run 运行项目，运行结果如下所示：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(venv) <span class="built_in">PS</span> D:\sources\python_repos\flask<span class="literal">-book-app</span>&gt; flask run</span><br><span class="line"> * Serving Flask app <span class="string">&#x27;bookapp&#x27;</span> (lazy loading)</span><br><span class="line"> * Environment: development</span><br><span class="line"> * Debug mode: on</span><br><span class="line"> * Restarting with stat</span><br><span class="line"> * Debugger is active!</span><br><span class="line"> * Debugger PIN: <span class="number">129</span><span class="literal">-008-647</span></span><br><span class="line"> * Running on http://<span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">5000</span>/ (Press CTRL+C to quit)</span><br></pre></td></tr></table></figure>

<h2 id="安装扩展"><a href="#安装扩展" class="headerlink" title="安装扩展"></a>安装扩展</h2><p>在 <code>Visual Studio Code</code> 中使用安装名为 <code>PostCode</code> 的扩展, 如下图所示：</p>
<img src="/2021/12/09/flask-webapi/003.png" class="" title="flask run">


<h2 id="无参数的默认分页查询图书测试"><a href="#无参数的默认分页查询图书测试" class="headerlink" title="无参数的默认分页查询图书测试"></a>无参数的默认分页查询图书测试</h2><img src="/2021/12/09/flask-webapi/004.png" class="" title="fetch all">

<h2 id="带参数的分页查询图书测试"><a href="#带参数的分页查询图书测试" class="headerlink" title="带参数的分页查询图书测试"></a>带参数的分页查询图书测试</h2><img src="/2021/12/09/flask-webapi/0042.png" class="" title="fetch all">

<h2 id="查询指定-id-的图书测试"><a href="#查询指定-id-的图书测试" class="headerlink" title="查询指定 id 的图书测试"></a>查询指定 id 的图书测试</h2><img src="/2021/12/09/flask-webapi/005.png" class="" title="fetch one">

<h2 id="添加新图书测试"><a href="#添加新图书测试" class="headerlink" title="添加新图书测试"></a>添加新图书测试</h2><img src="/2021/12/09/flask-webapi/006.png" class="" title="new book">


<h2 id="修改图书测试"><a href="#修改图书测试" class="headerlink" title="修改图书测试"></a>修改图书测试</h2><img src="/2021/12/09/flask-webapi/007.png" class="" title="update book">


<h2 id="删除图书测试"><a href="#删除图书测试" class="headerlink" title="删除图书测试"></a>删除图书测试</h2><img src="/2021/12/09/flask-webapi/008.png" class="" title="delete book">



<hr>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://hujiyi.github.io">laohoodman</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://hujiyi.github.io/2021/12/09/flask-webapi/">https://hujiyi.github.io/2021/12/09/flask-webapi/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://hujiyi.github.io" target="_blank">Laohoo</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/python/">python</a><a class="post-meta__tags" href="/tags/flask/">flask</a><a class="post-meta__tags" href="/tags/webapi/">webapi</a></div><div class="post-share"><div class="social-share" data-image="https://hujiyi.github.io/2021/12/09/flask-webapi/flask.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="/pluginsSrc/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="/pluginsSrc/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2021/12/21/pip-config-sources/" title="Python pip 使用国内镜像源"><img class="cover" src="https://hujiyi.github.io/2020/02/29/use-hexo-tag-cloud/default_bg.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Python pip 使用国内镜像源</div></div><div class="info-2"><div class="info-item-1">1、执行以下两个命令，设置全局使用国内源（中科大） 123pip config set global.index-url https://mirrors.ustc.edu.cn/pypi/web/simplepip config set global.trusted-host https://mirrors.ustc.edu.cn/pypi/web/simple  2、输出（查看）现有的pip源： 1pip config list       </div></div></div></a><a class="pagination-related" href="/2021/12/04/flutter-development-environment-configuration/" title="在 Windows 10/11 配置 Flutter 开发环境"><img class="cover" src="https://hujiyi.github.io/2021/02/02/flutter-introduction-part-I/flutter_eman_blog.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">在 Windows 10/11 配置 Flutter 开发环境</div></div><div class="info-2"><div class="info-item-1">关联文章 在 Windows 中同时安装多个 JDK  使用 Android SDK 命令行工具搭建 Flutter 开发环境   安装 Flutter SDKFlutter 到现在为止, 还处于高速发展的初始阶段, Flutter SDK 的各个大版本之间, 存在一些不兼容的情况, 所以建议选择使用 stable 发行通道的 Flutter SDK 最新版本。 下载 Flutter SDKFlutter SDK 下载地址：  Flutter 官方网站：https://docs.flutter.dev/development/tools/sdk/releases  清华大学镜像：https://mirrors.tuna.tsinghua.edu.cn/flutter/flutter_infra_release/releases/stable/windows/   解压 Flutter SDK将压缩包解压, 然后把其中的 flutter 目录整个放在你想放置 Flutter SDK 的路径中（例如 D:\AppData, 解压后路径为: D:\AppData\flutter）,...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2022/08/10/create-an-app-in-django-review/" title="Django 框架开发实战 - 复习"><img class="cover" src="https://hujiyi.github.io/2022/07/03/create-an-app-in-django-001/django.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-10</div><div class="info-item-2">Django 框架开发实战 - 复习</div></div><div class="info-2"><div class="info-item-1">开发环境： Microsoft Windows 10 Enterprise LTSC [Version 10.0.19044.1586], locale zh-CN  Python 3.8.10  PyCharm 2021.2 (Professional Edition)  Visual Studio Code, 64-bit edition (version 1.67.2)    在 PyCharm 中创建 Django 项目在  PyCharm 菜单中选择 File -&gt; New Project, 在弹出的 新项目 对话框中选择 项目类型、保存位置 等信息。 修改项目的 语言 和 时区 配置打开文件 myproject/settings.py, 找到 LANGUAGE_CODE、TIME_ZONE 和 USE_TZ 并进行修改, 如下图所示： 12345678LANGUAGE_CODE = &#x27;zh-Hans&#x27;  # 语言代码TIME_ZONE = &#x27;Asia/shanghai&#x27;   # 时区USE_I18N =...</div></div></div></a><a class="pagination-related" href="/2022/08/05/create-an-app-in-django-006/" title="Django 框架开发实战 006 - 设备管理应用"><img class="cover" src="https://hujiyi.github.io/2022/07/03/create-an-app-in-django-001/django.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-05</div><div class="info-item-2">Django 框架开发实战 006 - 设备管理应用</div></div><div class="info-2"><div class="info-item-1">开发环境： Microsoft Windows 10 Enterprise LTSC [Version 10.0.19044.1586], locale zh-CN  Python 3.8.10  PyCharm 2021.2 (Professional Edition)  Visual Studio Code, 64-bit edition (version 1.67.2)    添加新应用 激活虚拟环境  在项目文件夹中 manage.py 文件所在的位置打开 PowerShell窗口 或其他命令行终端, 使用命令激活虚拟环境 1.\venv\Scripts\activate   输入命令, 创建名为 equipment 的应用:  1python .\manage.py startapp equipment   修改项目配置文件打开项目的 settings.py 文件, 添加当前应用到  INSTALLED_APPS  列表中 12345678910111213INSTALLED_APPS = [    &#x27;django.contrib.admin&#x27;, ...</div></div></div></a><a class="pagination-related" href="/2022/07/05/create-an-app-in-django-005/" title="Django 框架开发实战 005 - 用户登录验证"><img class="cover" src="https://hujiyi.github.io/2022/07/03/create-an-app-in-django-001/django.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-05</div><div class="info-item-2">Django 框架开发实战 005 - 用户登录验证</div></div><div class="info-2"><div class="info-item-1">开发环境： Microsoft Windows 10 Enterprise LTSC [Version 10.0.19044.1586], locale zh-CN  Python 3.8.10  PyCharm 2021.2 (Professional Edition)  Visual Studio Code, 64-bit edition (version 1.67.2)    修改网站的导航栏打开 templates/nav.html 文件, 编辑其内容如下: 1234567891011121314151617181920212223242526272829303132&lt;!-- 导航菜单栏 --&gt;&lt;nav class=&quot;navbar navbar-expand-sm bg-light mb-4&quot;&gt;    &lt;div class=&quot;container d-flex w-100&quot;&gt;        &lt;h2&gt;我的网站&lt;/h2&gt;        &lt;div...</div></div></div></a><a class="pagination-related" href="/2022/07/04/create-an-app-in-django-004/" title="Django 框架开发实战 004 - 实现组织构架的管理功能"><img class="cover" src="https://hujiyi.github.io/2022/07/03/create-an-app-in-django-001/django.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-04</div><div class="info-item-2">Django 框架开发实战 004 - 实现组织构架的管理功能</div></div><div class="info-2"><div class="info-item-1">开发环境： Microsoft Windows 10 Enterprise LTSC [Version 10.0.19044.1586], locale zh-CN  Python 3.8.10  PyCharm 2021.2 (Professional Edition)  Visual Studio Code, 64-bit edition (version 1.67.2)    自己实现表单添加组织构架在项目 templates/department/ 文件夹添加用于以下几个新的HTML文件待用: edit.html, detail.html, delete.html,  打开 department/views.py 文件, 在文件中添加用于 新增、修改、删除、查看详细内容的函数, 代码如下所示: 12345678910111213141516171819202122232425from django.shortcuts import render, redirect, get_object_or_404from django.core.paginator import...</div></div></div></a><a class="pagination-related" href="/2022/07/03/create-an-app-in-django-003/" title="Django 框架开发实战 003 - 使用模板和静态文件"><img class="cover" src="https://hujiyi.github.io/2022/07/03/create-an-app-in-django-001/django.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-03</div><div class="info-item-2">Django 框架开发实战 003 - 使用模板和静态文件</div></div><div class="info-2"><div class="info-item-1">开发环境： Microsoft Windows 10 Enterprise LTSC [Version 10.0.19044.1586], locale zh-CN  Python 3.8.10  PyCharm 2021.2 (Professional Edition)  Visual Studio Code, 64-bit edition (version 1.67.2)    使用模板(Template)在 Django 框架中，模板 是可以帮助开发者快速生成呈现给用户页面的工具。用于编写 html 代码，还可以嵌入模板代码转换更方便的完成页面开发，再通过在视图中 渲染 模板，将生成模板的设计实现了 业务逻辑视图 与 显示内容模板 的分离，一个视图可以使用任意一个模板，一个模板可以供多个视图使用。 我们可以轻松地将 Bootstrap 5 或其他前端组件框架添加到项目中, 更快地编写出漂亮的前端界面。  当前显示的页面 &#x3D; 模板 + 数据,    模板分为两部分：...</div></div></div></a><a class="pagination-related" href="/2022/07/03/create-an-app-in-django-002/" title="Django 框架开发实战 002 - 使用内置的后台管理功能"><img class="cover" src="https://hujiyi.github.io/2022/07/03/create-an-app-in-django-001/django.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-03</div><div class="info-item-2">Django 框架开发实战 002 - 使用内置的后台管理功能</div></div><div class="info-2"><div class="info-item-1">开发环境： Microsoft Windows 10 Enterprise LTSC [Version 10.0.19044.1586], locale zh-CN  Python 3.8.10  PyCharm 2021.2 (Professional Edition)  Visual Studio Code, 64-bit edition (version 1.67.2)    在项目内创建应用在项目文件夹中按住键盘的 Shift, 点鼠标 右键, 选择 在此处打开PowerShell窗口 创建应用的命令： python  manage.py startapp &lt;应用名称&gt; 12(venv) PS D:\PycharmProjects\myproject&gt; python .\manage.py startapp department(venv) PS D:\PycharmProjects\myproject&gt;  添加 users 应用后的项目结构 12345678910111213141516171819-- myproject   |--...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://hujiyi.github.io/2020/02/29/use-hexo-tag-cloud/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">laohoodman</div><div class="author-info-description">如果你交给某人一个程序，你将折磨他一整天；如果你教某人如何编写程序，你将折磨他一辈子。 —— David Leinweber.</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">62</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">56</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/hujiyi"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/hujiyi" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#HTTP-%E7%9A%84%E5%B8%B8%E7%94%A8%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95%E5%A6%82%E4%B8%8B"><span class="toc-number">1.</span> <span class="toc-text">HTTP 的常用请求方法如下:</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RESTful-API%E8%A7%84%E5%88%92"><span class="toc-number">2.</span> <span class="toc-text">RESTful API规划</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-number">3.</span> <span class="toc-text">创建项目</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8C%85%E7%BB%84%E7%BB%87%E9%A1%B9%E7%9B%AE%E4%BB%A3%E7%A0%81"><span class="toc-number">4.</span> <span class="toc-text">使用包组织项目代码</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">5.</span> <span class="toc-text">使用数据库</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E7%B1%BB"><span class="toc-number">6.</span> <span class="toc-text">添加数据模型类</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%9A%84%E5%91%BD%E4%BB%A4%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">7.</span> <span class="toc-text">添加的命令实现数据库初始化</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BC%96%E5%86%99-API-%E6%96%B9%E6%B3%95-%E7%BB%84%E7%BB%87-Flask-RESTful-%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1"><span class="toc-number">8.</span> <span class="toc-text">编写 API 方法 ( 组织 Flask-RESTful 资源对象)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%91%E5%AE%9A%E8%B5%84%E6%BA%90%E4%B8%8EURI"><span class="toc-number">9.</span> <span class="toc-text">绑定资源与URI</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95-RESTful-API"><span class="toc-number">10.</span> <span class="toc-text">测试 RESTful API</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E9%A1%B9%E7%9B%AE"><span class="toc-number">10.1.</span> <span class="toc-text">运行项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%89%A9%E5%B1%95"><span class="toc-number">10.2.</span> <span class="toc-text">安装扩展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A0%E5%8F%82%E6%95%B0%E7%9A%84%E9%BB%98%E8%AE%A4%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E5%9B%BE%E4%B9%A6%E6%B5%8B%E8%AF%95"><span class="toc-number">10.3.</span> <span class="toc-text">无参数的默认分页查询图书测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%A6%E5%8F%82%E6%95%B0%E7%9A%84%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E5%9B%BE%E4%B9%A6%E6%B5%8B%E8%AF%95"><span class="toc-number">10.4.</span> <span class="toc-text">带参数的分页查询图书测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%8C%87%E5%AE%9A-id-%E7%9A%84%E5%9B%BE%E4%B9%A6%E6%B5%8B%E8%AF%95"><span class="toc-number">10.5.</span> <span class="toc-text">查询指定 id 的图书测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%96%B0%E5%9B%BE%E4%B9%A6%E6%B5%8B%E8%AF%95"><span class="toc-number">10.6.</span> <span class="toc-text">添加新图书测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%9B%BE%E4%B9%A6%E6%B5%8B%E8%AF%95"><span class="toc-number">10.7.</span> <span class="toc-text">修改图书测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%9B%BE%E4%B9%A6%E6%B5%8B%E8%AF%95"><span class="toc-number">10.8.</span> <span class="toc-text">删除图书测试</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/11/16/learn-vue3-000/" title="Learn Vue3 目录"><img src="https://hujiyi.github.io/2024/11/16/learn-vue3-000/vuetoc.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Learn Vue3 目录"/></a><div class="content"><a class="title" href="/2024/11/16/learn-vue3-000/" title="Learn Vue3 目录">Learn Vue3 目录</a><time datetime="2024-11-16T12:35:53.000Z" title="发表于 2024-11-16 20:35:53">2024-11-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/27/flutter-tutorial-toc/" title="Flutter Tutorial Table Of Content"><img src="https://hujiyi.github.io/2021/02/02/flutter-introduction-part-I/flutter_eman_blog.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Flutter Tutorial Table Of Content"/></a><div class="content"><a class="title" href="/2023/02/27/flutter-tutorial-toc/" title="Flutter Tutorial Table Of Content">Flutter Tutorial Table Of Content</a><time datetime="2023-02-27T05:11:08.000Z" title="发表于 2023-02-27 13:11:08">2023-02-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/16/linux-from-scratch-toc/" title="从 Linux From Scratch 构建自己的操作系统 - 目录"><img src="https://hujiyi.github.io/2023/02/16/linux-from-scratch-toc/Linux-From-Scratch.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从 Linux From Scratch 构建自己的操作系统 - 目录"/></a><div class="content"><a class="title" href="/2023/02/16/linux-from-scratch-toc/" title="从 Linux From Scratch 构建自己的操作系统 - 目录">从 Linux From Scratch 构建自己的操作系统 - 目录</a><time datetime="2023-02-16T05:04:02.000Z" title="发表于 2023-02-16 13:04:02">2023-02-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/05/installing-mysql-zip-archive-in-windows/" title="在 Windows 安装解压版的 MySQL 8"><img src="https://hujiyi.github.io/2023/01/05/installing-mysql-zip-archive-in-windows/admin-mysql-logo900.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在 Windows 安装解压版的 MySQL 8"/></a><div class="content"><a class="title" href="/2023/01/05/installing-mysql-zip-archive-in-windows/" title="在 Windows 安装解压版的 MySQL 8">在 Windows 安装解压版的 MySQL 8</a><time datetime="2023-01-05T05:05:51.000Z" title="发表于 2023-01-05 13:05:51">2023-01-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/21/build-vue3-desktop-app-with-vite-electron-vuetify/" title="使用 electron 和 vuetify 创建 Vue3 桌面应用程序"><img src="/2022/11/21/build-vue3-desktop-app-with-vite-electron-vuetify/electron.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用 electron 和 vuetify 创建 Vue3 桌面应用程序"/></a><div class="content"><a class="title" href="/2022/11/21/build-vue3-desktop-app-with-vite-electron-vuetify/" title="使用 electron 和 vuetify 创建 Vue3 桌面应用程序">使用 electron 和 vuetify 创建 Vue3 桌面应用程序</a><time datetime="2022-11-21T01:23:54.000Z" title="发表于 2022-11-21 09:23:54">2022-11-21</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 By laohoodman</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script src="/js/jquery.min.js"></script><script src="/js/fishes.js"></script><script src="/js/fish.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/pluginsSrc/butterfly-extsrc/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>