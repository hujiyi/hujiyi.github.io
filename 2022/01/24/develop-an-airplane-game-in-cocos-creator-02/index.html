<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 02——玩家飞机 | Laohoo</title><meta name="author" content="laohoodman"><meta name="copyright" content="laohoodman"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="开发工具 Cocos Dashboard 1.0.20 Cocos Creator 3.4.0 Visual Studio Code 1.63 Microsoft Edge 97.0.1072.69   创建玩家飞机 在 层级管理器 中 创建一个空节点, 命名为 playerPlane, 在 资源管理器 中拖动的 FBX 模型 assets&#x2F;res&#x2F;model&#x2F;plane01&#x2F;plane01 到">
<meta property="og:type" content="article">
<meta property="og:title" content="学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 02——玩家飞机">
<meta property="og:url" content="https://hujiyi.github.io/2022/01/24/develop-an-airplane-game-in-cocos-creator-02/index.html">
<meta property="og:site_name" content="Laohoo">
<meta property="og:description" content="开发工具 Cocos Dashboard 1.0.20 Cocos Creator 3.4.0 Visual Studio Code 1.63 Microsoft Edge 97.0.1072.69   创建玩家飞机 在 层级管理器 中 创建一个空节点, 命名为 playerPlane, 在 资源管理器 中拖动的 FBX 模型 assets&#x2F;res&#x2F;model&#x2F;plane01&#x2F;plane01 到">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hujiyi.github.io/2022/01/23/develop-an-airplane-game-in-cocos-creator-01/000.png">
<meta property="article:published_time" content="2022-01-24T10:59:51.000Z">
<meta property="article:modified_time" content="2022-10-11T01:40:12.999Z">
<meta property="article:author" content="laohoodman">
<meta property="article:tag" content="cocos creator">
<meta property="article:tag" content="game">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hujiyi.github.io/2022/01/23/develop-an-airplane-game-in-cocos-creator-01/000.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://hujiyi.github.io/2022/01/24/develop-an-airplane-game-in-cocos-creator-02/index.html"><link rel="preconnect"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: '/pluginsSrc/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 02——玩家飞机',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://hujiyi.github.io/2020/02/29/use-hexo-tag-cloud/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">62</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">56</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://hujiyi.github.io/2022/01/23/develop-an-airplane-game-in-cocos-creator-01/000.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Laohoo</span></a><a class="nav-page-title" href="/"><span class="site-name">学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 02——玩家飞机</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 02——玩家飞机</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-24T10:59:51.000Z" title="发表于 2022-01-24 18:59:51">2022-01-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-11T01:40:12.999Z" title="更新于 2022-10-11 09:40:12">2022-10-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/cocos-creator/">cocos creator</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>8分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="开发工具"><a href="#开发工具" class="headerlink" title="开发工具"></a>开发工具</h1><ol>
<li>Cocos Dashboard 1.0.20</li>
<li>Cocos Creator 3.4.0</li>
<li>Visual Studio Code 1.63</li>
<li>Microsoft Edge 97.0.1072.69</li>
</ol>
<hr>
<h1 id="创建玩家飞机"><a href="#创建玩家飞机" class="headerlink" title="创建玩家飞机"></a>创建玩家飞机</h1><ol>
<li>在 <code>层级管理器</code> 中 创建一个空节点, 命名为 <code>playerPlane</code>, 在 <code>资源管理器</code> 中拖动的 <code>FBX</code> 模型 <code>assets/res/model/plane01/plane01</code> 到 <code>playerPlane</code> 节点中, 并将节点 <code>playerPlane</code> 下的模型名称 <code>plane01</code>(模型根节点) 改名为 <code>body</code>。</li>
</ol>
<img src="/2022/01/24/develop-an-airplane-game-in-cocos-creator-02/001.png" class="" title="payerPlane">

<ol start="2">
<li>在 <code>资源管理器</code> 中点击选中 <code>assets/res/model/plane01</code> 文件夹, <code>右键</code> -&gt; <code>创建</code> -&gt; <code>材质</code>, 命名为 <code>playerPlane</code>。</li>
</ol>
<img src="/2022/01/24/develop-an-airplane-game-in-cocos-creator-02/002.png" class="" title="payerPlane">

<ol start="3">
<li>将材质 <code>playerPlane</code> 的属性 <code>Effect</code> 更改为 <code>builtin-unlit</code>; 属性 <code>USE TEXTURE</code> 打勾, 飞机图片 <code>plane01</code> 拖动到 <code>MainTexture</code>, 保存材质。</li>
</ol>
<img src="/2022/01/24/develop-an-airplane-game-in-cocos-creator-02/003.png" class="" title="payerPlane">

<ol start="4">
<li>在 <code>层级管理器</code> 中, 点击选中 <code>playerPlane/body/plane01</code> 节点, 将上一步创建的材质 <code>playerPlane</code> 拖动到其 <code>属性检查器</code> 中的 <code>Materials</code>[0], 保存场景。</li>
</ol>
<img src="/2022/01/24/develop-an-airplane-game-in-cocos-creator-02/004.png" class="" title="payerPlane">

<ol start="5">
<li><p>在 <code>层级管理器</code> 中点击选中 <code>playerPlane/body</code> 节点, 修改缩放属性 <code>Scale</code> 的值为：<code>X:8, Y:8, Z:8</code> (放大8倍)。</p>
</li>
<li><p>此时飞机与背景板重叠，在 <code>层级管理器</code> 中点击选中 <code>movingSceneBg</code>, 将其 <code>Position</code> 的 <code>Y轴</code> 修改为: <code>-20</code> (背景往下移)。</p>
</li>
</ol>
<img src="/2022/01/24/develop-an-airplane-game-in-cocos-creator-02/005.png" class="" title="movingBG">

<ol start="7">
<li>在 <code>层级管理器</code> 中点击选中 <code>playerPlane</code> 节点，将其拖动到 <code>资源管理器</code> 中的 <code>assets/res/model/plane01</code> 文件夹 <code>制作</code> 成 <code>预制</code>, 保存场景。</li>
</ol>
<img src="/2022/01/24/develop-an-airplane-game-in-cocos-creator-02/006.png" class="" title="payerPlane">


<h1 id="控制飞机移动"><a href="#控制飞机移动" class="headerlink" title="控制飞机移动"></a>控制飞机移动</h1><ol>
<li>在 <code>资源管理器</code> 点击选中 <code>assets/script/</code> 文件夹, <code>右键</code> -&gt; <code>创建</code> -&gt; <code>文件夹</code>, 命名为 <code>ui</code>, 在该文件夹中添加脚本 <code>UIManager</code>, 双击打开该脚本进行编辑。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; _decorator, <span class="title class_">Component</span>, <span class="title class_">Node</span>, <span class="title class_">Touch</span>, <span class="title class_">EventTouch</span>, <span class="title class_">Input</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;cc&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = _decorator;</span><br><span class="line"></span><br><span class="line">@<span class="title function_">ccclass</span>(<span class="string">&#x27;UIManager&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">UIManager</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line"></span><br><span class="line">    @property</span><br><span class="line">    public playerPlaneSpeed = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    @<span class="title function_">property</span>(<span class="title class_">Node</span>)</span><br><span class="line">    public <span class="attr">playerPlane</span>: <span class="title class_">Node</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">on</span>(<span class="title class_">Input</span>.<span class="property">EventType</span>.<span class="property">TOUCH_MOVE</span>, <span class="variable language_">this</span>.<span class="property">_touchMove</span>, <span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private <span class="title function_">_touchMove</span>(<span class="params">touch: Touch, event: EventTouch</span>) &#123;</span><br><span class="line">        <span class="comment">// touch.getDelta() 获取当前触点值与上一次触点值的差值</span></span><br><span class="line">        <span class="keyword">let</span> delta = touch.<span class="title function_">getDelta</span>();</span><br><span class="line">        <span class="keyword">let</span> pos = <span class="variable language_">this</span>.<span class="property">playerPlane</span>.<span class="property">position</span>;  <span class="comment">// 获取当前节点的位置</span></span><br><span class="line">        <span class="comment">// 在速度前乘以 0.01 是用于调整移动的速度</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">playerPlane</span>.<span class="title function_">setPosition</span>(</span><br><span class="line">            pos.<span class="property">x</span> + <span class="number">0.01</span> * <span class="variable language_">this</span>.<span class="property">playerPlaneSpeed</span> * delta.<span class="property">x</span>,</span><br><span class="line">            pos.<span class="property">y</span>,</span><br><span class="line">            pos.<span class="property">z</span> - <span class="number">0.01</span> * <span class="variable language_">this</span>.<span class="property">playerPlaneSpeed</span> * delta.<span class="property">y</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>在 <code>层级管理器</code> 中点击选中场景 <code>airplane</code>, <code>右键</code> -&gt; <code>创建</code> -&gt; <code>UI组件</code> -&gt; <code>Canvas(画布)</code>, 名字默认。</p>
</li>
<li><p>在 <code>层级管理器</code> 中点击选中 <code>Canvas</code> 节点, 在 <code>属性检查器</code> 点 <code>添加组件</code> -&gt; <code>自定义脚本</code> -&gt; <code>UIManager</code>, 将上一步编辑好的脚本 <code>UIManager</code> 挂载到 <code>Canvas</code> 根节点。</p>
</li>
<li><p>将 <code>层级管理器</code> 中的 <code>playerPlane</code> 节点拖到 <code>Canvas</code> 节点 <code>属性检查器</code> 的 <code>playerPlane</code> 属性中, 修改 <code>playerPlaneSpeed</code> 值为 8，保存场景，预览。</p>
</li>
</ol>
<img src="/2022/01/24/develop-an-airplane-game-in-cocos-creator-02/007.png" class="" title="payerPlane">

<h1 id="玩家飞机子弹"><a href="#玩家飞机子弹" class="headerlink" title="玩家飞机子弹"></a>玩家飞机子弹</h1><ol>
<li>在 <code>资源管理器</code> 点击选中 <code>assets/res/effect/bullet/</code> 文件夹, <code>右键</code> -&gt; <code>创建</code> -&gt; <code>材质</code>, 命名为 <code>bullet01</code>, 修改 <code>Effect</code> 为 <code>bulitin-unlit</code>, 此处子弹模型包含透明外环效果, 将 <code>Technique</code> 修改为 <code>3-alpha-blend</code> 模式; 选中 <code>USE TEXTURE</code>, 将图片 <code>bullet01</code> 拖动到 <code>属性检查器</code> 中的属性 <code>MainTexture</code>, 在 <code>属性检查器</code> 右上角点 <code>保存</code>。</li>
</ol>
<img src="/2022/01/24/develop-an-airplane-game-in-cocos-creator-02/008.png" class="" title="bullet01">

<ol start="2">
<li><p>选中已经制作好的子弹材质 <code>bullet01</code>, <code>Ctrl+D</code> 快速复制为 <code>4</code> 个(<code>bullet02</code> - <code>bullet05</code>), 分别将各个新材质的属性 <code>MainTexture</code> 更改为对应的图片, 保存。</p>
</li>
<li><p>在 <code>层级管理器</code> 中创建一个名为 <code>bullet01</code> 的空节点， 点击选中 <code>bullet01</code> 节点,  <code>右键</code> -&gt; <code> 创建</code> -&gt; <code>3D对象</code> -&gt; <code>Quad(四方形)</code>, 将其改名为 <code>body</code>。</p>
</li>
<li><p>创建好的 <code>Quad(四方形)</code> 垂直于背景， 将其 <code>Rotation</code> 的 <code>X轴</code> 改为 <code>-90</code>, 摆正其位置, 修改其 <code>Materials</code> 为 材质 <code>bullet01</code>; 缩放属性 <code>Scale(缩放)</code> 调整为 <code>5倍</code> 大小，<code>Scale: X:5, Y:5, Z:5 </code>。</p>
</li>
</ol>
<img src="/2022/01/24/develop-an-airplane-game-in-cocos-creator-02/009.png" class="" title="bullet01">

<ol start="5">
<li>在 <code>资源管理器</code> 的 <code>script</code> 文件夹中创建 <code>bullet</code> 文件夹, 并创建子弹脚本 <code>Bullet</code> 处理子弹的运行逻辑和子弹的销毁。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; _decorator, <span class="title class_">Component</span>, <span class="title class_">Node</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;cc&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = _decorator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">OUTOFRANGE</span> = <span class="number">50</span>; <span class="comment">// 子弹移动的最大范围</span></span><br><span class="line"></span><br><span class="line">@<span class="title function_">ccclass</span>(<span class="string">&#x27;Bullet&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Bullet</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line"></span><br><span class="line">    @property</span><br><span class="line">    public bulletSpeed = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">update</span>(<span class="params">deltaTime: number</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> pos = <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">position</span>;  <span class="comment">// 获取子弹的位置</span></span><br><span class="line">        <span class="keyword">let</span> moveLength = pos.<span class="property">z</span> - <span class="variable language_">this</span>.<span class="property">bulletSpeed</span>; <span class="comment">// 计算每一帧子弹要移动的位置</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">setPosition</span>(pos.<span class="property">x</span>, pos.<span class="property">y</span>, moveLength);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (moveLength &gt; <span class="variable constant_">OUTOFRANGE</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">destroy</span>();</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`bullet destory`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>在 <code>层级管理器</code> 点击选中 <code>bullet01</code> 节点,  在 <code>属性检查器</code> 中点击 <code>添加组件</code> -&gt; <code>自定义脚本</code> -&gt; <code>Bullet</code>, 将脚本绑定到子弹根节点上; 然后将 <code>层级管理器</code> 中 <code>bullet01</code> 的节点拖动到 <code>资源管理器</code> 的 <code>assets/res/effect/bullet/</code> 文件夹中，变成预制。</li>
</ol>
<img src="/2022/01/24/develop-an-airplane-game-in-cocos-creator-02/010.png" class="" title="bullet01">

<ol start="7">
<li><p>在 <code>资源管理器</code> 中点击选中 <code>assets/res/effect/bullet/bullet01</code> 预制, <code>Ctrl+D</code> 快速复制为 <code>4</code> 个(<code>bullet02</code> - <code>bullet05</code>)。</p>
</li>
<li><p>在 <code>资源管理器</code> 中分别双击 <code>assets/res/effect/bullet/</code> 文件夹中的预制 <code>bullet02</code> - <code>bullet05</code>, 将 <code>body</code> 中的 <code>Materials</code> 替换为对应的 <code>子弹材质</code>, 保存场景。</p>
</li>
</ol>
<img src="/2022/01/24/develop-an-airplane-game-in-cocos-creator-02/011.png" class="" title="bullet01">

<ol start="9">
<li>在 <code>层级管理器</code> 中 <code>删除</code> 或 <code>不显示</code> (否则子弹会一直出现在屏幕上)子弹节点 <code>bullet01</code>, 并保存。</li>
</ol>
<h1 id="控制子弹发射"><a href="#控制子弹发射" class="headerlink" title="控制子弹发射"></a>控制子弹发射</h1><ol>
<li>在 <code>资源管理器</code> 创建 <code>assets/script/framework</code> 文件夹, 然后创建名为 <code>GameManager</code> 的脚本。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; _decorator, <span class="title class_">Component</span>, <span class="title class_">Node</span>, <span class="title class_">Prefab</span>, instantiate &#125; <span class="keyword">from</span> <span class="string">&#x27;cc&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Bullet</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../bullet/Bullet&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = _decorator;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@<span class="title function_">ccclass</span>(<span class="string">&#x27;GameManager&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">GameManager</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    @<span class="title function_">property</span>(<span class="title class_">Node</span>)</span><br><span class="line">    public <span class="attr">playerPlane</span>: <span class="title class_">Node</span> = <span class="literal">null</span>; <span class="comment">// 玩家飞机</span></span><br><span class="line"></span><br><span class="line">    @<span class="title function_">property</span>(<span class="title class_">Prefab</span>)</span><br><span class="line">    public <span class="attr">bullet01</span>: <span class="title class_">Prefab</span> = <span class="literal">null</span>; <span class="comment">// 子弹1</span></span><br><span class="line">    @<span class="title function_">property</span>(<span class="title class_">Prefab</span>)</span><br><span class="line">    public <span class="attr">bullet02</span>: <span class="title class_">Prefab</span> = <span class="literal">null</span>; <span class="comment">// 子弹2</span></span><br><span class="line">    @<span class="title function_">property</span>(<span class="title class_">Prefab</span>)</span><br><span class="line">    public <span class="attr">bullet03</span>: <span class="title class_">Prefab</span> = <span class="literal">null</span>; <span class="comment">// 子弹3</span></span><br><span class="line">    @<span class="title function_">property</span>(<span class="title class_">Prefab</span>)</span><br><span class="line">    public <span class="attr">bullet04</span>: <span class="title class_">Prefab</span> = <span class="literal">null</span>; <span class="comment">// 子弹4</span></span><br><span class="line">    @<span class="title function_">property</span>(<span class="title class_">Prefab</span>)</span><br><span class="line">    public <span class="attr">bullet05</span>: <span class="title class_">Prefab</span> = <span class="literal">null</span>; <span class="comment">// 子弹5</span></span><br><span class="line"></span><br><span class="line">    @property</span><br><span class="line">    public shootTime = <span class="number">0.3</span>; <span class="comment">// 射击周期（间隔时间）</span></span><br><span class="line">    @property</span><br><span class="line">    public bulletSpeed = <span class="number">1</span>;  <span class="comment">// 子弹速度</span></span><br><span class="line"></span><br><span class="line">    @<span class="title function_">property</span>(<span class="title class_">Node</span>)</span><br><span class="line">    public <span class="attr">bulletRoot</span>: <span class="title class_">Node</span> = <span class="literal">null</span>; <span class="comment">// 子弹管理节点</span></span><br><span class="line"></span><br><span class="line">    private _currShootTime = <span class="number">0</span>;</span><br><span class="line">    private _isShooting = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">_init</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">update</span>(<span class="params">deltaTime: number</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_currShootTime</span> += deltaTime;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">_isShooting</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">_currShootTime</span> &gt; <span class="variable language_">this</span>.<span class="property">shootTime</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">createPlayerBullet</span>();</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">_currShootTime</span> = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建玩家飞机的子弹</span></span><br><span class="line">    public <span class="title function_">createPlayerBullet</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 实例材质类型的子弹, 实例出来的对象不在场景中</span></span><br><span class="line">        <span class="keyword">const</span> bullet = <span class="title function_">instantiate</span>(<span class="variable language_">this</span>.<span class="property">bullet01</span>);</span><br><span class="line">        bullet.<span class="title function_">setParent</span>(<span class="variable language_">this</span>.<span class="property">bulletRoot</span>); <span class="comment">// 子弹挂载到子弹管理节点中</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> pos = <span class="variable language_">this</span>.<span class="property">playerPlane</span>.<span class="property">position</span>; <span class="comment">// 获取玩家飞机位置</span></span><br><span class="line">        <span class="comment">// 子弹出现的位置为飞机 Z轴 -7</span></span><br><span class="line">        bullet.<span class="title function_">setPosition</span>(pos.<span class="property">x</span>, pos.<span class="property">y</span>, pos.<span class="property">z</span> - <span class="number">7</span>);</span><br><span class="line">        <span class="comment">// 获取 Bullet类 （子弹预制根节点添加 Bullet 脚本）</span></span><br><span class="line">        <span class="keyword">const</span> bulletComp = bullet.<span class="title function_">getComponent</span>(<span class="title class_">Bullet</span>);</span><br><span class="line">        bulletComp.<span class="property">bulletSpeed</span> = <span class="variable language_">this</span>.<span class="property">bulletSpeed</span>; <span class="comment">// 设置子弹速度</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 是否处理触摸状态，触摸才发射子弹</span></span><br><span class="line">    public <span class="title function_">isShooting</span>(<span class="params">value: boolean</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_isShooting</span> = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private <span class="title function_">_init</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 用于按下的时候即发射第一颗子弹</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_currShootTime</span> = <span class="variable language_">this</span>.<span class="property">shootTime</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>修改 <code>UIManager</code> 脚本本以更配合 <code>GameManager</code> 脚本使用</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; _decorator, <span class="title class_">Component</span>, <span class="title class_">Node</span>, <span class="title class_">Touch</span>, <span class="title class_">EventTouch</span>, <span class="title class_">Input</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;cc&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">GameManager</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../framework/GameManager&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; ccclass, property &#125; = _decorator;</span><br><span class="line"></span><br><span class="line">@<span class="title function_">ccclass</span>(<span class="string">&#x27;UIManager&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">UIManager</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line"></span><br><span class="line">    @property</span><br><span class="line">    public playerPlaneSpeed = <span class="number">1</span>;</span><br><span class="line">    @<span class="title function_">property</span>(<span class="title class_">Node</span>)</span><br><span class="line">    public <span class="attr">playerPlane</span>: <span class="title class_">Node</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 添加游戏控制脚本</span></span><br><span class="line">    @<span class="title function_">property</span>(<span class="title class_">GameManager</span>)</span><br><span class="line">    public <span class="attr">gameManager</span>:<span class="title class_">GameManager</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">on</span>(<span class="title class_">Input</span>.<span class="property">EventType</span>.<span class="property">TOUCH_START</span>, <span class="variable language_">this</span>.<span class="property">_touchStart</span>, <span class="variable language_">this</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">on</span>(<span class="title class_">Input</span>.<span class="property">EventType</span>.<span class="property">TOUCH_MOVE</span>, <span class="variable language_">this</span>.<span class="property">_touchMove</span>, <span class="variable language_">this</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">node</span>.<span class="title function_">on</span>(<span class="title class_">Input</span>.<span class="property">EventType</span>.<span class="property">TOUCH_END</span>, <span class="variable language_">this</span>.<span class="property">_touchEnd</span>, <span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private <span class="title function_">_touchMove</span>(<span class="params">touch: Touch, event: EventTouch</span>) &#123;</span><br><span class="line">        <span class="comment">// touch.getDelta() 获取当前触点值与上一次触点值的差值</span></span><br><span class="line">        <span class="keyword">let</span> delta = touch.<span class="title function_">getDelta</span>();</span><br><span class="line">        <span class="keyword">let</span> pos = <span class="variable language_">this</span>.<span class="property">playerPlane</span>.<span class="property">position</span>;  <span class="comment">// 获取当前节点的位置</span></span><br><span class="line">        <span class="comment">// 在速度前乘以 0.01 是用于调整移动的速度</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">playerPlane</span>.<span class="title function_">setPosition</span>(</span><br><span class="line">            pos.<span class="property">x</span> + <span class="number">0.01</span> * <span class="variable language_">this</span>.<span class="property">playerPlaneSpeed</span> * delta.<span class="property">x</span>,</span><br><span class="line">            pos.<span class="property">y</span>,</span><br><span class="line">            pos.<span class="property">z</span> - <span class="number">0.01</span> * <span class="variable language_">this</span>.<span class="property">playerPlaneSpeed</span> * delta.<span class="property">y</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 开始触摸屏幕的回调方法</span></span><br><span class="line">    private <span class="title function_">_touchStart</span>(<span class="params">touch: Touch, event: EventTouch</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">gameManager</span>.<span class="title function_">isShooting</span>(<span class="literal">true</span>); <span class="comment">// 触摸屏幕时玩家飞机开始射击</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private <span class="title function_">_touchEnd</span>(<span class="params">touch: Touch, event: EventTouch</span>) &#123;</span><br><span class="line">        <span class="comment">// 停止触摸时玩家飞机结束射击</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">gameManager</span>.<span class="title function_">isShooting</span>(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>在 <code>层级管理器</code> 中点击选中场景 <code>airplane</code>, <code>右键</code>-&gt; <code>空节点</code>，命名为 <code>bulletManager</code>, 创建子弹管理节点。</p>
</li>
<li><p>在 <code>层级管理器</code> 中点击选中场景 <code>airplane</code>, <code>右键</code>-&gt; <code>空节点</code>，命名为 <code>gameManager</code>, 在其 <code>属性检查器</code> 中分别添加玩家飞机节点 <code>playerPlane</code>, 子弹预制：<code>bullet01</code> - <code>bullet05</code>, 子弹管理节点<code>BulletRoot</code>: <code>bulletManager</code>。</p>
</li>
</ol>
<img src="/2022/01/24/develop-an-airplane-game-in-cocos-creator-02/012.png" class="" title="gameManager">

<ol start="5">
<li>在 <code>层级管理器</code> 点击选中 <code>Canvas</code>节点， 将 <code>gameManager</code> 节点拖动到其 <code>UIManamet</code> 中 <code>GameManager</code> 的属性。</li>
</ol>
<img src="/2022/01/24/develop-an-airplane-game-in-cocos-creator-02/013.png" class="" title="Canvas">

<ol start="6">
<li>保存场景，预览。子弹速度慢，可以将 <code>gameManager</code> 节点 的 <code>shootTime</code> 改为 0.1 ， 缩短子弹发射间隔，提高速度，或是将 <code>bulletSpeed</code> 值改大。</li>
</ol>
<p>&#x3D;&#x3D;&#x3D;END&#x3D;&#x3D;&#x3D;</p>
<hr>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://hujiyi.github.io">laohoodman</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://hujiyi.github.io/2022/01/24/develop-an-airplane-game-in-cocos-creator-02/">https://hujiyi.github.io/2022/01/24/develop-an-airplane-game-in-cocos-creator-02/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://hujiyi.github.io" target="_blank">Laohoo</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/cocos-creator/">cocos creator</a><a class="post-meta__tags" href="/tags/game/">game</a></div><div class="post-share"><div class="social-share" data-image="https://hujiyi.github.io/2022/01/23/develop-an-airplane-game-in-cocos-creator-01/000.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="/pluginsSrc/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="/pluginsSrc/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2022/01/29/develop-an-airplane-game-in-cocos-creator-03/" title="学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 03——敌机出现"><img class="cover" src="https://hujiyi.github.io/2022/01/23/develop-an-airplane-game-in-cocos-creator-01/000.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 03——敌机出现</div></div><div class="info-2"><div class="info-item-1">开发工具 Cocos Dashboard 1.0.20 Cocos Creator 3.4.0 Visual Studio Code 1.63 Microsoft Edge 97.0.1072.69   制作敌人飞机 在 资源管理器 的 assets/script/ 创建名为 plane 的文件夹, 在 assets/script/plane/ 文件夹下创建脚本，命名为 EnemyPlane, 暂时不用编辑脚本内容。  在 资源管理器 的 assets/res/model/plane02 文件夹添加 材质，命名为 plane02, 修改 Effect 属性为 bulitin-unlit, 选中 USE TEXTURE, MainTexture 拖入图片 plane02, 保存材质。      复制上一步的材质到 assets/res/model/plane03 文件夹， 更改材质名为：plane03， 修改其 MainTexture 为图片plane03， 保存材质。  在 层级管理器 中创建一个 空节点，命名为 plane02, 将 资源管理器 中的 FBX 模型...</div></div></div></a><a class="pagination-related" href="/2022/01/23/develop-an-airplane-game-in-cocos-creator-01/" title="学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 01——无限滚动的背景"><img class="cover" src="https://hujiyi.github.io/2022/01/23/develop-an-airplane-game-in-cocos-creator-01/000.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 01——无限滚动的背景</div></div><div class="info-2"><div class="info-item-1">开发工具 Cocos Dashboard 1.0.20 Cocos Creator 3.4.0 Visual Studio Code 1.63 Microsoft Edge 97.0.1072.69  游戏配套素材资源下载：游戏开发配套素材资源  项目准备 启动 Cocos Dashboard, 点 新建 按钮， 项目类型选择 Empty(3D), 输入 项目名称， 选择项目保存 位置，点 创建并打开 按钮，完成项目的创建。     下载 游戏开发配套素材资源 并解压缩到 当前文件夹, 将解压后的 res文件夹 拖动到当前项目的 资源管理器 的 assets 文件夹中。如下图所示：    创建场景 在 资源管理器 中点击选中 assets/ 文件夹， 右键 -&gt; 创建 -&gt; 文件夹, 将文件夹命名为 scene。     在 资源管理器 中点击选中 assets/scene/ 文件夹, 右键 -&gt; 创建 -&gt; 场景, 将场景命名为 airplane。     双击打开 airplane 场景    创建背景材质 在 资源管理器 中点击选中...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2022/02/05/develop-an-airplane-game-in-cocos-creator-08/" title="学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 08(完)——粒子和血条"><img class="cover" src="https://hujiyi.github.io/2022/01/23/develop-an-airplane-game-in-cocos-creator-01/000.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-05</div><div class="info-item-2">学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 08(完)——粒子和血条</div></div><div class="info-2"><div class="info-item-1">开发工具 Cocos Dashboard 1.0.20 Cocos Creator 3.4.0 Visual Studio Code 1.63 Microsoft Edge 97.0.1072.69  游戏配套素材资源下载：游戏开发配套素材资源 导入特效资源 下载并解压游戏配套资源,  res/particle package/ 文件夹包含已经制作好的一些特效资源  1234567891011.|-- audio|-- effect|-- particle package|   |-- ball.zip           --- 场景装饰：星球     |   |-- cloudStars.zip     --- 场景装饰：背景云层特效     |   |-- explode.zip        --- 玩家飞机爆炸粒子特效     |   |-- explodeSmall.zip   --- 敌人飞机爆炸粒子特效     |   |-- stone.zip          --- 场景装饰：石头     |   `-- tailFlame.zip      ---...</div></div></div></a><a class="pagination-related" href="/2022/02/04/develop-an-airplane-game-in-cocos-creator-07/" title="学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 07——游戏音效"><img class="cover" src="https://hujiyi.github.io/2022/01/23/develop-an-airplane-game-in-cocos-creator-01/000.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-04</div><div class="info-item-2">学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 07——游戏音效</div></div><div class="info-2"><div class="info-item-1">开发工具 Cocos Dashboard 1.0.20 Cocos Creator 3.4.0 Visual Studio Code 1.63 Microsoft Edge 97.0.1072.69  音频 在 层级管理器 创建名为 audio 的 空节点, 然后在 audio 节点上再创建一个 空节点，命名为 bgm(backgroundmusic), 点击选中 bgm 节点, 在 属性检查器 点击 添加组件 按钮, 选择  Audio -&gt; AudioSource, 将 资源管理器 中的  assets/res/audio/music/bgm 拖动到 bgm 节点的 Clip 属性中, 选中 Loop 和 PlayOnAwake 两个属性,  Volume 属性的值改为 0.8。     在 层级管理器 点击选中 plane01 节点, 在其 属性检查器 点击 添加组件 按钮, 选择  Audio -&gt; AudioSource, 将 资源管理器 中的  assets/res/audio/sound/player 拖动到其 Clip 属性中, 取消 选中 Loop...</div></div></div></a><a class="pagination-related" href="/2022/02/03/develop-an-airplane-game-in-cocos-creator-06/" title="学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 06——游戏界面"><img class="cover" src="https://hujiyi.github.io/2022/01/23/develop-an-airplane-game-in-cocos-creator-01/000.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-03</div><div class="info-item-2">学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 06——游戏界面</div></div><div class="info-2"><div class="info-item-1">开发工具 Cocos Dashboard 1.0.20 Cocos Creator 3.4.0 Visual Studio Code 1.63 Microsoft Edge 97.0.1072.69  界面宽度和高度 当前游戏只有一个场景: 主场景。界面则分为三个部分：主界面(gameStart), 游戏界面(game)和结算界面(gameOver)。     在 主菜单 选择 项目 -&gt; 项目设置, 在弹出的 项目设置 窗口 左侧 选中 项目数据, 右侧 窗格中的 设计宽度 改为 640, 设计高度 改为 960, 关闭窗口。    游戏主界面(开始界面) 在 资源管理器 中点击选中图片 assets/res/texture/logo, 在 属性检查器 中将图片 logo.png 的属性 Type(图片类型) 更改为 sprite-frame, 保存更改。     点击 场景编辑器 上方 3D 按钮，切换为 2D 模式。  在 层级管理器 点击选中 Canvas 节点，右键 -&gt; 创建 -&gt; 空节点, 命名为 gameStart。      在 层级管理器...</div></div></div></a><a class="pagination-related" href="/2022/01/31/develop-an-airplane-game-in-cocos-creator-05/" title="学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 05——玩家飞机获取道具更换子弹"><img class="cover" src="https://hujiyi.github.io/2022/01/23/develop-an-airplane-game-in-cocos-creator-01/000.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-31</div><div class="info-item-2">学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 05——玩家飞机获取道具更换子弹</div></div><div class="info-2"><div class="info-item-1">开发工具 Cocos Dashboard 1.0.20 Cocos Creator 3.4.0 Visual Studio Code 1.63 Microsoft Edge 97.0.1072.69   提供给玩家飞机的子弹道具玩家飞家可以发射的子弹类型分为三种：  M型：直线发射 1发 白色小子弹(默认) H型：直线发射 2发 红色小子弹 S型：扇形发射 3发 月牙型子弹，夹角为45度(或根据实际情况调整)  更换子弹的道具类型和出现方式：  道具每10秒出现一个，类型为 HSM 其中一种 收集到与当前不一样的道具时切换子弹类型 使用S型道具时玩家飞机比敌人飞机速度慢  创建子弹切换道具材质 在 资源管理器 的 assets/res/model/fightIconBullet/ 文件夹创建 材质, 命名为 bulletS。材质 Effect 属性的值设为 builltin-unlit, Technique 属性的值设为 03-alpha-blend， USE-TEXTURE 打勾, 将图片...</div></div></div></a><a class="pagination-related" href="/2022/01/31/develop-an-airplane-game-in-cocos-creator-04/" title="学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 04——飞机与子弹的碰撞"><img class="cover" src="https://hujiyi.github.io/2022/01/23/develop-an-airplane-game-in-cocos-creator-01/000.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-31</div><div class="info-item-2">学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 04——飞机与子弹的碰撞</div></div><div class="info-2"><div class="info-item-1">开发工具 Cocos Dashboard 1.0.20 Cocos Creator 3.4.0 Visual Studio Code 1.63 Microsoft Edge 97.0.1072.69   添加碰撞分组 在 主菜单 点击  项目 -&gt; 项目设置, 打开 项目设置 窗口。     在 物理 选项最下方的 碰撞矩阵 点 + 添加四个分组：PLAYER_PLANE, ENEMY_PLANE, PLAYER_BULLET, ENEMY_BULLET 。  设置分组的掩码：   123PLAYER_PLANE - ENEMY_BULLETPLAYER_PLANE - ENEMY_PLANEENEMY_PLANE - PLAYER_BULLET     设置完毕，关闭对话框。  设置碰撞组件和分组 在 层级管理器 点击选中 playerPlane 节点, 在其 属性检查器 中点 添加组件 -&gt; Physics -&gt; BoxCollider。     将 playerPlane 节点 属性检查器 中的 cc.BoxCollider+ 属性 Size...</div></div></div></a><a class="pagination-related" href="/2022/01/29/develop-an-airplane-game-in-cocos-creator-03/" title="学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 03——敌机出现"><img class="cover" src="https://hujiyi.github.io/2022/01/23/develop-an-airplane-game-in-cocos-creator-01/000.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-29</div><div class="info-item-2">学习笔记：使用 Cocos Creator 3.4.0 开发空战游戏 03——敌机出现</div></div><div class="info-2"><div class="info-item-1">开发工具 Cocos Dashboard 1.0.20 Cocos Creator 3.4.0 Visual Studio Code 1.63 Microsoft Edge 97.0.1072.69   制作敌人飞机 在 资源管理器 的 assets/script/ 创建名为 plane 的文件夹, 在 assets/script/plane/ 文件夹下创建脚本，命名为 EnemyPlane, 暂时不用编辑脚本内容。  在 资源管理器 的 assets/res/model/plane02 文件夹添加 材质，命名为 plane02, 修改 Effect 属性为 bulitin-unlit, 选中 USE TEXTURE, MainTexture 拖入图片 plane02, 保存材质。      复制上一步的材质到 assets/res/model/plane03 文件夹， 更改材质名为：plane03， 修改其 MainTexture 为图片plane03， 保存材质。  在 层级管理器 中创建一个 空节点，命名为 plane02, 将 资源管理器 中的 FBX 模型...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://hujiyi.github.io/2020/02/29/use-hexo-tag-cloud/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">laohoodman</div><div class="author-info-description">如果你交给某人一个程序，你将折磨他一整天；如果你教某人如何编写程序，你将折磨他一辈子。 —— David Leinweber.</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">62</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">56</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/hujiyi"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/hujiyi" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7"><span class="toc-number">1.</span> <span class="toc-text">开发工具</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%8E%A9%E5%AE%B6%E9%A3%9E%E6%9C%BA"><span class="toc-number">2.</span> <span class="toc-text">创建玩家飞机</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E9%A3%9E%E6%9C%BA%E7%A7%BB%E5%8A%A8"><span class="toc-number">3.</span> <span class="toc-text">控制飞机移动</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%8E%A9%E5%AE%B6%E9%A3%9E%E6%9C%BA%E5%AD%90%E5%BC%B9"><span class="toc-number">4.</span> <span class="toc-text">玩家飞机子弹</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%AD%90%E5%BC%B9%E5%8F%91%E5%B0%84"><span class="toc-number">5.</span> <span class="toc-text">控制子弹发射</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/11/16/learn-vue3-000/" title="Learn Vue3 目录"><img src="https://hujiyi.github.io/2024/11/16/hello-world/00/vuetoc.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Learn Vue3 目录"/></a><div class="content"><a class="title" href="/2024/11/16/learn-vue3-000/" title="Learn Vue3 目录">Learn Vue3 目录</a><time datetime="2024-11-16T12:35:53.000Z" title="发表于 2024-11-16 20:35:53">2024-11-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/27/flutter-tutorial-toc/" title="Flutter Tutorial Table Of Content"><img src="https://hujiyi.github.io/2021/02/02/flutter-introduction-part-I/flutter_eman_blog.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Flutter Tutorial Table Of Content"/></a><div class="content"><a class="title" href="/2023/02/27/flutter-tutorial-toc/" title="Flutter Tutorial Table Of Content">Flutter Tutorial Table Of Content</a><time datetime="2023-02-27T05:11:08.000Z" title="发表于 2023-02-27 13:11:08">2023-02-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/16/linux-from-scratch-toc/" title="从 Linux From Scratch 构建自己的操作系统 - 目录"><img src="https://hujiyi.github.io/2023/02/16/linux-from-scratch-toc/Linux-From-Scratch.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从 Linux From Scratch 构建自己的操作系统 - 目录"/></a><div class="content"><a class="title" href="/2023/02/16/linux-from-scratch-toc/" title="从 Linux From Scratch 构建自己的操作系统 - 目录">从 Linux From Scratch 构建自己的操作系统 - 目录</a><time datetime="2023-02-16T05:04:02.000Z" title="发表于 2023-02-16 13:04:02">2023-02-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/05/installing-mysql-zip-archive-in-windows/" title="在 Windows 安装解压版的 MySQL 8"><img src="https://hujiyi.github.io/2023/01/05/installing-mysql-zip-archive-in-windows/admin-mysql-logo900.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在 Windows 安装解压版的 MySQL 8"/></a><div class="content"><a class="title" href="/2023/01/05/installing-mysql-zip-archive-in-windows/" title="在 Windows 安装解压版的 MySQL 8">在 Windows 安装解压版的 MySQL 8</a><time datetime="2023-01-05T05:05:51.000Z" title="发表于 2023-01-05 13:05:51">2023-01-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/21/build-vue3-desktop-app-with-vite-electron-vuetify/" title="使用 electron 和 vuetify 创建 Vue3 桌面应用程序"><img src="/2022/11/21/build-vue3-desktop-app-with-vite-electron-vuetify/electron.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用 electron 和 vuetify 创建 Vue3 桌面应用程序"/></a><div class="content"><a class="title" href="/2022/11/21/build-vue3-desktop-app-with-vite-electron-vuetify/" title="使用 electron 和 vuetify 创建 Vue3 桌面应用程序">使用 electron 和 vuetify 创建 Vue3 桌面应用程序</a><time datetime="2022-11-21T01:23:54.000Z" title="发表于 2022-11-21 09:23:54">2022-11-21</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 By laohoodman</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script src="/js/jquery.min.js"></script><script src="/js/fishes.js"></script><script src="/js/fish.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/pluginsSrc/butterfly-extsrc/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>